/*
 * jFormer JavaScript Library v1.4.4
 * http://jFormer.com/
 *
 * Copyright 2011, Kirk Ouimet, Seth Zander Jensen
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jFormer.com/download#license
 *
 * Date: Mon Jan 10 2011
 */
/** OTHER LICENSES
 * jquery.simpletip 1.3.1. A simple tooltip plugin
 * Copyright (c) 2009 Craig Thompson
 * http://craigsworks.com
 * Licensed under GPLv3
 * http://www.opensource.org/licenses/gpl-3.0.html
 * Version : 1.3.1
 * Released: February 5, 2009 - 11:04am
 * ----
 * jQuery.ScrollTo - Easy element scrolling using jQuery.
 * Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 3/9/2009
 * @author Ariel Flesler
 * @version 1.4.1
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * ----
 * Masked Input plugin for jQuery
 * Copyright (c) 2007-2009 Josh Bush (digitalbush.com)
 * Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
 * Version: 1.2.2 (03/09/2009 22:39:06)
 * ----
 * Date Input 1.2.1
 * Requires jQuery version: >= 1.2.6
 * Copyright (c) 2007-2008 Jonathan Leighton & Torchbox Ltd
 */
(function(){var a=false,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=true;var f=new this;a=false;for(var g in c)f[g]=typeof c[g]=="function"&&typeof e[g]=="function"&&b.test(c[g])?function(h,j){return function(){var l=this._super;this._super=e[h];var k=j.apply(this,arguments);this._super=l;return k}}(g,c[g]):c[g];d.prototype=f;d.constructor=d;d.extend=arguments.callee; return d}})();
JFormerUtility=function(){}; $.extend(JFormerUtility.prototype,{isSet:function(){var a=arguments,b=a.length,c=0;if(b==0)throw Error("Empty isSet.");for(;c!=b;)if(typeof a[c]=="undefined"||a[c]===null)return!1;else c++;return!0},empty:function(a){var b;if(a===""||a===0||a==="0"||a===null||a===!1||a===void 0)return!0;if(typeof a=="object"){for(b in a)if(typeof a[b]!=="function")return!1;return!0}return!1},getExtraWidth:function(a){var a=$(a),b=0;b+=parseInt(a.css("padding-left"),10)+parseInt(a.css("padding-right"),10);b+=parseInt(a.css("margin-left"),
10)+parseInt(a.css("margin-right"),10);b+=parseInt(a.css("borderLeftWidth"),10)+parseInt(a.css("borderRightWidth"),10);return b},jsonEncode:function(a){var b=window.JSON;if(typeof b==="object"&&typeof b.stringify==="function")return b.stringify(a);var c=function(a){var b=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=
0;return b.test(a)?'"'+a.replace(b,function(a){var b=c[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},d=function(a,b){var g="",h=0,j=h="",j=0,k=g,l=[],n=b[a];n&&typeof n==="object"&&typeof n.toJSON==="function"&&(n=n.toJSON(a));switch(typeof n){case "string":return c(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);case "object":if(!n)return"null";g+="    ";l=[];if(Object.prototype.toString.apply(n)===
"[object Array]"){j=n.length;for(h=0;h<j;h+=1)l[h]=d(h,n)||"null";return j=l.length===0?"[]":g?"[\n"+g+l.join(",\n"+g)+"\n"+k+"]":"["+l.join(",")+"]"}for(h in n)Object.hasOwnProperty.call(n,h)&&(j=d(h,n))&&l.push(c(h)+(g?": ":":")+j);return j=l.length===0?"{}":g?"{\n"+g+l.join(",\n"+g)+"\n"+k+"}":"{"+l.join(",")+"}"}};return d("",{"":a})}});jFormerUtility=new JFormerUtility;
(function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]=typeof c[g]=="function"&&typeof e[g]=="function"&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(g,c[g]):c[g];d.prototype=f;d.constructor=d;d.extend=arguments.callee;return d}})();
DateInput=function(a){function b(c,d){typeof opts!="object"&&(d={});a.extend(this,b.DEFAULT_OPTS,d);var e=a('<span class="jFormComponentDateButton">Find Date</span>');this.input=a(c);this.input.after(e);this.button=a(c).parent().find("span.jFormComponentDateButton");this.bindMethodsToObj("show","hide","hideIfClickOutside","keydownHandler","selectDate");this.build();this.selectDate();this.hide()}b.DEFAULT_OPTS={jFormComponentDateSelectorMonthNames:["January","February","March","April","May","June",
"July","August","September","October","November","December"],short_jFormComponentDateSelectorMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],short_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],start_of_week:0};b.prototype={build:function(){var b=a('<p class="jFormComponentDateSelectorMonthNavigator"><span class="jFormComponentDateSelectorButton jFormComponentDateSelectorPrevious" title="[Page-Up]">&#171;</span> <span class="jFormComponentDateSelectorMonthName"></span> <span class="jFormComponentDateSelectorButton jFormComponentDateSelectorNext" title="[Page-Down]">&#187;</span></p>');
this.monthNameSpan=a(".jFormComponentDateSelectorMonthName",b);a(".jFormComponentDateSelectorPrevious",b).click(this.bindToObj(function(){this.moveMonthBy(-1)}));a(".jFormComponentDateSelectorNext",b).click(this.bindToObj(function(){this.moveMonthBy(1)}));var d=a('<p class="jFormComponentDateSelectorYearNavigator"><span class="jFormComponentDateSelectorButton jFormComponentDateSelectorPrevious" title="[Ctrl+Page-Up]">&#171;</span> <span class="jFormComponentDateSelectorYearName"></span> <span class="jFormComponentDateSelectorButton jFormComponentDateSelectorNext" title="[Ctrl+Page-Down]">&#187;</span></p>');
this.yearNameSpan=a(".jFormComponentDateSelectorYearName",d);a(".jFormComponentDateSelectorPrevious",d).click(this.bindToObj(function(){this.moveMonthBy(-12)}));a(".jFormComponentDateSelectorNext",d).click(this.bindToObj(function(){this.moveMonthBy(12)}));var b=a('<div class="jFormComponentDateSelectorNavigator"></div>').append(b,d),e="<table><thead><tr>";a(this.adjustDays(this.short_day_names)).each(function(){e+="<th>"+this+"</th>"});e+="</tr></thead><tbody></tbody></table>";this.dateSelector=this.rootLayers=
a('<div class="jFormComponentDateSelector"></div>').append(b,e).insertAfter(this.input);if(a.browser.msie&&a.browser.version<7)this.ieframe=a('<iframe class="jFormComponentDateSelectorIEFrame" frameborder="0" src="#"></iframe>').insertBefore(this.dateSelector),this.rootLayers=this.rootLayers.add(this.ieframe),a(".jFormComponentDateSelectorButton",b).mouseover(function(){a(this).addClass("hover")}),a(".jFormComponentDateSelectorButton",b).mouseout(function(){a(this).removeClass("hover")});this.tbody=
a("tbody",this.dateSelector);this.input.change(this.bindToObj(function(){this.selectDate()}));this.selectDate()},selectMonth:function(b){var d=new Date(b.getFullYear(),b.getMonth(),1);if(!this.currentMonth||!(this.currentMonth.getFullYear()==d.getFullYear()&&this.currentMonth.getMonth()==d.getMonth())){this.currentMonth=d;for(var d=this.rangeStart(b),e=this.rangeEnd(b),e=this.daysBetween(d,e),f="",g=0;g<=e;g++){var h=new Date(d.getFullYear(),d.getMonth(),d.getDate()+g,12,0);this.isFirstDayOfWeek(h)&&
(f+="<tr>");f+=h.getMonth()==b.getMonth()?'<td class="jFormComponentDateSelectorSelectedDay" date="'+this.dateToString(h)+'">'+h.getDate()+"</td>":'<td class="jFormComponentDateSelectorUnselectedMonth" date="'+this.dateToString(h)+'">'+h.getDate()+"</td>";this.isLastDayOfWeek(h)&&(f+="</tr>")}this.tbody.empty().append(f);this.monthNameSpan.empty().append(this.monthName(b));this.yearNameSpan.empty().append(this.currentMonth.getFullYear());a(".jFormComponentDateSelectorSelectedDay",this.tbody).click(this.bindToObj(function(b){this.changeInput(a(b.target).attr("date"))}));
a('td[date="'+this.dateToString(new Date)+'"]',this.tbody).addClass("jFormComponentDateSelectorToday");a("td.jFormComponentDateSelectorSelectedDay",this.tbody).mouseover(function(){a(this).addClass("hover")});a("td.jFormComponentDateSelectorSelectedDay",this.tbody).mouseout(function(){a(this).removeClass("hover")})}a(".jFormComponentDateSelectorSelected",this.tbody).removeClass("jFormComponentDateSelectorSelected");a('td[date="'+this.selectedDateString+'"]',this.tbody).addClass("jFormComponentDateSelectorSelected")},
selectDate:function(a){typeof a=="undefined"&&(a=this.stringToDate(this.input.val()));a||(a=new Date);this.selectedDate=a;this.selectedDateString=this.dateToString(this.selectedDate);this.selectMonth(this.selectedDate)},changeInput:function(a){this.input.val(a).change();this.hide()},show:function(){this.rootLayers.css("display","block");this.button.unbind("click",this.show);this.input.unbind("focus",this.show);a(document.body).keydown(this.keydownHandler);a([window,document.body]).click(this.hideIfClickOutside);
this.setPosition()},hide:function(){this.rootLayers.css("display","none");a([window,document.body]).unbind("click",this.hideIfClickOutside);this.button.click(this.show);this.input.focus(this.show);a(document.body).unbind("keydown",this.keydownHandler)},hideIfClickOutside:function(a){a.target!=this.input[0]&&a.target!=this.button[0]&&!this.insideSelector(a)&&this.hide()},insideSelector:function(a){var b=this.dateSelector.offset();b.right=b.left+this.dateSelector.outerWidth();b.bottom=b.top+this.dateSelector.outerHeight();
return a.pageY<b.bottom&&a.pageY>b.top&&a.pageX<b.right&&a.pageX>b.left},keydownHandler:function(a){switch(a.keyCode){case 9:case 27:this.hide();return;case 13:this.changeInput(this.selectedDateString);break;case 33:this.moveDateMonthBy(a.ctrlKey?-12:-1);break;case 34:this.moveDateMonthBy(a.ctrlKey?12:1);break;case 38:this.moveDateBy(-7);break;case 40:this.moveDateBy(7);break;case 37:this.moveDateBy(-1);break;case 39:this.moveDateBy(1);break;default:return}a.preventDefault()},stringToDate:function(a){a=
a.replace(/[^\d]/g,"/");return a.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4,4})$/)?new Date(a):null},dateToString:function(a){function b(a){a=""+a;a.length==1&&(a="0"+a);return a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+a.getFullYear()},setPosition:function(){var b=this.button.position();this.rootLayers.css({top:b.top,left:b.left+this.button.outerWidth()+4});this.ieframe&&this.ieframe.css({width:this.dateSelector.outerWidth(),height:this.dateSelector.outerHeight()});var b=b.top+this.dateSelector.outerHeight()+
12,d="",d=jFormerUtility.isSet(window.scrollY)?window.scrollY:document.documentElement.scrollTop;d+a(window).height()>b||a.scrollTo(b-a(window).height()+"px",250,{axis:"y"})},moveDateBy:function(a){this.selectDate(new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+a))},moveDateMonthBy:function(a){var b=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+a,this.selectedDate.getDate());b.getMonth()==this.selectedDate.getMonth()+a+1&&b.setDate(0);
this.selectDate(b)},moveMonthBy:function(a){this.selectMonth(new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+a,this.currentMonth.getDate()))},monthName:function(a){return this.jFormComponentDateSelectorMonthNames[a.getMonth()]},bindToObj:function(a){var b=this;return function(){return a.apply(b,arguments)}},bindMethodsToObj:function(){for(var a=0;a<arguments.length;a++)this[arguments[a]]=this.bindToObj(this[arguments[a]])},indexFor:function(a,b){for(var e=0;e<a.length;e++)if(b==
a[e])return e},monthNum:function(a){return this.indexFor(this.jFormComponentDateSelectorMonthNames,a)},shortMonthNum:function(a){return this.indexFor(this.short_jFormComponentDateSelectorMonthNames,a)},shortDayNum:function(a){return this.indexFor(this.short_day_names,a)},daysBetween:function(a,b){a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());b=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return(b-a)/864E5},changeDayTo:function(a,b,e){a=e*(Math.abs(b.getDay()-a-e*7)%7);return new Date(b.getFullYear(),
b.getMonth(),b.getDate()+a)},rangeStart:function(a){return this.changeDayTo(this.start_of_week,new Date(a.getFullYear(),a.getMonth()),-1)},rangeEnd:function(a){return this.changeDayTo((this.start_of_week-1)%7,new Date(a.getFullYear(),a.getMonth()+1,0),1)},isFirstDayOfWeek:function(a){return a.getDay()==this.start_of_week},isLastDayOfWeek:function(a){return a.getDay()==(this.start_of_week-1)%7},adjustDays:function(a){for(var b=[],e=0;e<a.length;e++)b[e]=a[(e+this.start_of_week)%7];return b}};a.fn.date_input=
function(a){return this.each(function(){new b(this,a)})};a.date_input={initialize:function(b){a("input.date_input").date_input(b)}};return b}(jQuery);
(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=void 0;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};a.fn.extend({caret:function(a,b){if(this.length!=0)if(typeof a=="number")return b=typeof b=="number"?b:a,this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",a);c.select()}});else{if(this[0].setSelectionRange)a=
this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange)var c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1E5),b=a+c.text.length;return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]),g=f.data("tests");return a.map(f.data("buffer"),function(a,b){return g[b]?a:null}).join("")}var e=a.extend({placeholder:"_",completed:null},e),h=a.mask.definitions,
g=[],j=d.length,k=null,l=d.length;a.each(d.split(""),function(a,b){b=="?"?(l--,j=a):h[b]?(g.push(RegExp(h[b])),k==null&&(k=g.length-1)):g.push(null)});return this.each(function(){function f(a){for(;++a<=l&&!g[a];);return a}function m(b){var d=a(this).caret(),h=b.keyCode;r=h<16||h>16&&h<32||h>32&&h<41;if(!b.shiftKey&&(h==36&&(b.preventDefault(),a(this).caret(f(0))),h==35)){b.preventDefault();b=p.val().indexOf(" ");for(d=p.val().length;g[b]==null||p.val().charAt(b)!=" ";)if(b+=1,b==d)break;a(this).caret(b);
return!1}d.begin-d.end!=0&&(!r||h==8||h==46)&&t(d.begin,d.end);if(h==8||h==46||c&&h==127){for(b=d.begin+(h==46?0:-1);!g[b]&&--b>=0;);for(d=b;d<l;d++)if(g[d])if(o[d]=e.placeholder,h=f(d),h<l&&g[d].test(o[h]))o[d]=o[h];else break;u();p.caret(Math.max(k,b));return!1}else if(h==27)return p.val(v),p.caret(0,s()),!1}function q(b){if(r)return r=!1,b.keyCode==8?!1:null;var b=b||window.event,c=b.charCode||b.keyCode||b.which,d=a(this).caret();if(b.ctrlKey||b.altKey||b.metaKey)return!0;else if(c>=32&&c<=125||
c>186)if(b=f(d.begin-1),b<l&&(c=String.fromCharCode(c),g[b].test(c))){for(var d=b,h=e.placeholder;d<l;d++)if(g[d]){var j=f(d),k=o[d];o[d]=h;if(j<l&&g[j].test(k))h=k;else break}o[b]=c;u();b=f(b);a(this).caret(b);e.completed&&b==l&&e.completed.call(p)}return!1}function t(a,b){for(var c=a;c<b&&c<l;c++)if(g[c])o[c]=e.placeholder}function u(){return p.val(o.join("")).val()}function s(a){for(var b=p.val(),c=-1,d=0,f=0;d<l;d++)if(g[d]){for(o[d]=e.placeholder;f++<b.length;){var h=b.charAt(f-1);if(g[d].test(h)){o[d]=
h;c=d;break}}if(f>b.length)break}else o[d]==b[f]&&d!=j&&(f++,c=d);if(!a&&c+1<j)p.val(""),t(0,l);else if(a||c+1>=j)u(),a||p.val(p.val().substring(0,c+1));return j?d:k}var p=a(this),o=a.map(d.split(""),function(a){if(a!="?")return h[a]?e.placeholder:a}),r=!1,v=p.val();p.data("buffer",o).data("tests",g);p.attr("readonly")||p.one("unmask",function(){p.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){v=p.val();var a=s();u();setTimeout(function(){a==d.length?p.caret(0,
a):p.caret(a)},0)}).bind("blur.mask",function(){s();p.val()!=v&&p.change()}).bind("keydown.mask",m).bind("keypress.mask",q).bind(b,function(){setTimeout(function(){p.caret(s(!0))},0)});s()})}})})(jQuery);
(function(a){function b(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,f){a(window).scrollTo(b,c,f)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};c.window=function(){return a(window).scrollable()};a.fn.scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
b.compatMode=="BackCompat"?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,f){typeof e=="object"&&(f=e,e=0);typeof f=="function"&&(f={onAfter:f});d=="max"&&(d=9E9);f=a.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(e/=2);f.offset=b(f.offset);f.over=b(f.over);return this.scrollable().each(function(){function c(a){k.animate(m,e,f.easing,a&&function(){a.call(this,d,f)})}function h(a){var b="scroll"+a;if(!q)return j[b];var a="client"+a,c=j.ownerDocument.documentElement,
d=j.ownerDocument.body;return Math.max(c[b],d[b])-Math.min(c[a],d[a])}var j=this,k=a(j),l=d,n,m={},q=k.is("html,body");switch(typeof l){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px)?$/.test(l)){l=b(l);break}l=a(l,this);case "object":if(l.is||l.style)n=(l=a(l)).offset()}a.each(f.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",e=d.toLowerCase(),o="scroll"+d,r=j[o],v=b=="x"?"Width":"Height";n?(m[o]=n[e]+(q?0:r-k.offset()[e]),f.margin&&(m[o]-=parseInt(l.css("margin"+d))||0,m[o]-=parseInt(l.css("border"+
d+"Width"))||0),m[o]+=f.offset[e]||0,f.over[e]&&(m[o]+=l[v.toLowerCase()]()*f.over[e])):m[o]=l[e];/^\d+$/.test(m[o])&&(m[o]=m[o]<=0?0:Math.min(m[o],h(v)));!a&&f.queue&&(r!=m[o]&&c(f.onAfterFirst),delete m[o])});c(f.onAfter)}).end()}})(jQuery);
(function(a){function b(b,c,d){var h=c.hash.slice(1),j=document.getElementById(h)||document.getElementsByName(h)[0];if(j){b&&b.preventDefault();var k=a(d.target);if(!(d.lock&&k.is(":animated")||d.onBefore&&d.onBefore.call(d,b,j,k)===!1)){d.stop&&k.stop(!0);if(d.hash){var b=j.id==h?"id":"name",l=a("<a> </a>").attr(b,h).css({position:"absolute",top:a(window).scrollTop(),left:a(window).scrollLeft()});j[b]="";a("body").prepend(l);location=c.hash;l.remove();j[b]=h}k.scrollTo(j,d).trigger("notify.serialScroll",
[j])}}}var c=location.href.replace(/#.*/,""),d=a.localScroll=function(b){a("body").localScroll(b)};d.defaults={duration:1E3,axis:"y",event:"click",stop:!0,target:window,reset:!0};d.hash=function(c){if(location.hash){c=a.extend({},d.defaults,c);c.hash=!1;if(c.reset){var f=c.duration;delete c.duration;a(c.target).scrollTo(0,c);c.duration=f}b(0,location,c)}};a.fn.localScroll=function(e){function f(){return!!this.href&&!!this.hash&&this.href.replace(this.hash,"")==c&&(!e.filter||a(this).is(e.filter))}
e=a.extend({},d.defaults,e);return e.lazy?this.bind(e.event,function(c){var d=a([c.target,c.target.parentNode]).filter(f)[0];d&&b(c,d,e)}):this.find("a,area").filter(f).bind(e.event,function(a){b(a,this,e)}).end().end()}})(jQuery);
(function(a){var b=".serialScroll",c=a.serialScroll=function(b){a.scrollTo.window().serialScroll(b)};c.defaults={duration:1E3,axis:"x",event:"click",start:0,step:1,lock:1,cycle:1,constant:1};a.fn.serialScroll=function(d){var d=a.extend({},c.defaults,d),e=d.event,f=d.step,g=d.lazy;return this.each(function(){function c(a){a.data+=s;j(a,this)}function j(a,c){if(!isNaN(c))a.data=c,c=t;var e=a.data,g=a.type,h=d.exclude?l().slice(0,-d.exclude):l(),j=h.length,n=h[e],m=d.duration;g&&a.preventDefault();p&&
(clearTimeout(r),r=setTimeout(k,d.interval));if(!n){e=e<0?0:e=j-1;if(s==e)if(d.cycle)e=j-e-1;else return;n=h[e]}if(n&&!(g&&s==e||d.lock&&q.is(":animated")||g&&d.onBefore&&d.onBefore.call(c,a,n,q,l(),e)===!1))d.stop&&q.queue("fx",[]).stop(),d.constant&&(m=Math.abs(m/f*(s-e))),q.scrollTo(n,m,d).trigger("notify"+b,[e])}function k(){q.trigger("next"+b)}function l(){return a(u,t)}function n(a){if(!isNaN(a))return a;for(var b=l(),c;(c=b.index(a))==-1&&a!=t;)a=a.parentNode;return c}var m=d.target?this:document,
q=a(d.target||this,m),t=q[0],u=d.items,s=d.start,p=d.interval,o=d.navigation,r;g||(u=l());d.force&&j({},s);a(d.prev||[],m).bind(e,-f,c);a(d.next||[],m).bind(e,f,c);t.ssbound||q.bind("prev"+b,-f,c).bind("next"+b,f,c).bind("goto"+b,j);p&&q.bind("start"+b,function(){p||(clearTimeout(r),p=1,k())}).bind("stop"+b,function(){clearTimeout(r);p=0});q.bind("notify"+b,function(a,b){var c=n(b);c>-1&&(s=c)});t.ssbound=1;d.jump&&(g?q:l()).bind(e,function(a){j(a,n(a.target))});o&&(o=a(o,m).bind(e,function(a){a.data=
Math.round(l().length/o.length)*o.index(this);j(a,this)}))})}})(jQuery);
(function(){function a(a,c){var d=this,a=jQuery(a),e=['<span class="tipArrow"></span><div class="tipContent">',c.content.html(),"</div>"].join(""),f=jQuery(c.content).addClass(c.baseClass).addClass(c.fixed?c.fixedClass:"").addClass(c.persistent?c.persistentClass:"").html(e);jQuery(window).resize(function(){f.is(":visible")&&d.updatePos()});c.hidden?f.hide():f.show();c.persistent?(a.click(function(){a.get(0)}),jQuery(window).mousedown(function(a){f.css("display")!=="none"&&c.focus&&jQuery(a.target).parents(".tooltip").andSelf().filter(function(){return this===
f.get(0)})})):(a.hover(function(a){d.show(a)},function(){d.hide()}),c.fixed||a.mousemove(function(a){f.css("display")!=="none"&&d.updatePos(a)}));jQuery.extend(d,{getVersion:function(){return[1,2,0]},getParent:function(){return a},getTooltip:function(){return f},getPos:function(){return f.position()},setPos:function(c,e){var j=a.position();typeof c=="string"&&(c=parseInt(c)+j.left);typeof e=="string"&&(e=parseInt(e)+j.top);f.css({left:c,top:e});return d},show:function(a){if(c.onBeforeShow()===!1)return!1;
d.updatePos(c.fixed?null:a);switch(c.showEffect){case "fade":f.fadeIn(c.showTime);break;case "slide":f.slideDown(c.showTime,d.updatePos);break;case "custom":c.showCustom.call(f,c.showTime);break;default:case "none":f.show()}f.addClass(c.activeClass);c.onShow.call(d);jQuery(document).trigger("blurTip",[f,"show"]);return d},hide:function(){c.onBeforeHide.call(d);switch(c.hideEffect){case "fade":f.fadeOut(c.hideTime);break;case "slide":f.slideUp(c.hideTime);break;case "custom":c.hideCustom.call(f,c.hideTime);
break;default:case "none":f.hide()}f.removeClass(c.activeClass);c.onHide.call(d);jQuery(document).trigger("blurTip",[f,"hide"]);return d},update:function(){return d},load:function(a,b){c.beforeContentLoad.call(d);f.load(a,b,function(){c.onContentLoad.call(d)});return d},boundryCheck:function(a,b){var c=a+f.outerWidth(),d=b+f.outerHeight(),e=jQuery(window).width()+jQuery(window).scrollLeft(),n=jQuery(window).height()+jQuery(window).scrollTop();return[c>=e,d>=n]},updatePos:function(e){var h=f.outerWidth(),
j=f.outerHeight();if(!e&&c.fixed)if(c.position.constructor==Array)m=parseInt(c.position[0]),e=parseInt(c.position[1]);else if(jQuery(c.position).attr("nodeType")===1)e=jQuery(c.position).position(),m=e.left,e=e.top;else{var k=a.position(),l=a.outerWidth(),n=a.outerHeight(),m="",e="";switch(c.position){case "top":m=k.left-h/2+l/2;e=k.top-j;break;case "bottom":m=k.left-h/2+l/2;e=k.top+n;break;case "left":m=k.left-h;e=k.top-j/2+n/2;break;case "right":m=k.left+l;e=k.top-j/2+n/2;break;case "topRight":m=
k.left+l;e=k.top;break;default:case "default":m=l/2+k.left+20,e=k.top}}else m=e.pageX,e=e.pageY;typeof c.position!="object"?(m+=c.offset[0],e+=c.offset[1],c.boundryCheck&&(k=d.boundryCheck(m,e),k[0]&&(m=m-h/2-2*c.offset[0]),k[1]&&(e=e-j/2-2*c.offset[1]))):(typeof c.position[0]=="string"&&(m=String(m)),typeof c.position[1]=="string"&&(e=String(e)));d.setPos(m,e);return d}})}jQuery.fn.simpletip=function(b){var c=jQuery(this).eq(typeof b=="number"?b:0).data("simpletip");if(c)return c;var d={content:"A simple tooltip",
persistent:!1,focus:!1,hidden:!0,position:"default",offset:[0,0],boundryCheck:!1,fixed:!0,showEffect:"fade",showTime:150,showCustom:null,hideEffect:"fade",hideTime:150,hideCustom:null,baseClass:"tooltip",activeClass:"active",fixedClass:"fixed",persistentClass:"persistent",focusClass:"focus",onBeforeShow:function(){return!0},onShow:function(){},onBeforeHide:function(){},onHide:function(){},beforeContentLoad:function(){},onContentLoad:function(){}};jQuery.extend(d,b);this.each(function(){var b=new a(jQuery(this),
d);jQuery(this).data("simpletip",b)});return this}})();
JFormer=Class.extend({init:function(a,b){var c=this;this.initializing=!0;this.options=$.extend(!0,{animationOptions:{pageScroll:{duration:375,adjustHeightDuration:375},instance:{appearDuration:0,appearEffect:"fade",removeDuration:0,removeEffect:"fade",adjustHeightDuration:0},dependency:{appearDuration:250,appearEffect:"fade",hideDuration:100,hideEffect:"fade",adjustHeightDuration:100},alert:{appearDuration:250,appearEffect:"fade",hideDuration:100,hideEffect:"fade"},modal:{appearDuration:0,hideDuration:0}},
setupPageScroller:!0,validationTips:!0,pageNavigator:!1,splashPage:!1,alertsEnabled:!0,clientSideValidation:!0,debugMode:!1,submitButtonText:"Submit",submitProcessingButtonText:"Processing...",onSubmitStart:function(){return!0},onSubmitFinish:function(){return!0}},b.options||{});this.id=a;this.form=$(["form#",this.id].join(""));this.formData={};this.jFormPageWrapper=this.form.find("div.jFormPageWrapper");this.jFormPageScroller=this.form.find("div.jFormPageScroller");this.jFormPageNavigator=null;this.jFormPages=
{};this.maxJFormPageIdArrayIndexReached=this.currentJFormPage=null;this.jFormPageIdArray=[];this.currentJFormPageIdArrayIndex=null;this.blurredTips=[];this.lastEnabledPage=!1;this.control=this.form.find("ul.jFormerControl");this.controlNextLi=this.form.find("ul.jFormerControl li.nextLi");this.controlNextButton=this.controlNextLi.find("button.nextButton");this.controlPreviousLi=this.form.find("ul.jFormerControl li.previousLi");this.controlPreviousButton=this.controlPreviousLi.find("button.previousButton");
this.initPages(b.jFormPages);if(this.options.splashPage!==!1){if(this.options.splashPage==!1)this.options.splashPage={};this.addSplashPage()}else this.maxJFormPageIdArrayIndexReached=this.currentJFormPageIdArrayIndex=0,this.currentJFormPage=this.jFormPages[this.jFormPageIdArray[0]],this.currentJFormPage.active=!0,this.options.pageNavigator!==!1&&this.addPageNavigator();this.options.setupPageScroller&&this.setupPageScroller();this.hideInactivePages();this.setupControl();this.addSubmitListener();this.addEnterKeyListener();
this.addBlurTipListener();this.checkDependencies(!0);this.initializing=!1;$(window).load(function(){c.adjustHeight({adjustHeightDuration:0})})},initPages:function(a){var b=this,c=$.each,d={};c(a,function(a,f){var g=new JFormPage(b,a,f.options);g.show();g.options.dependencyOptions!==null&&$.each(g.options.dependencyOptions.dependentOn,function(b,c){d[c]===void 0&&(d[c]={pages:[],sections:[],components:[]});d[c].pages.push({jFormPageId:a})});c(f.jFormSections,function(b,f){var k=new JFormSection(g,
b,f.options);k.options.dependencyOptions!==null&&$.each(k.options.dependencyOptions.dependentOn,function(c,f){d[f]===void 0&&(d[f]={pages:[],sections:[],components:[]});d[f].sections.push({jFormPageId:a,jFormSectionId:b})});c(f.jFormComponents,function(c,f){var g=new window[f.type](k,c,f.type,f.options);k.addComponent(g);g.addInitialInstances();k.addComponent(g);g.options.dependencyOptions!==null&&$.each(g.options.dependencyOptions.dependentOn,function(f,g){d[g]===void 0&&(d[g]={pages:[],sections:[],
components:[]});d[g].components.push({jFormPageId:a,jFormSectionId:b,jFormComponentId:c})})});k.addInitialSectionInstances();g.addSection(k)});b.addJFormPage(g)});$.each(d,function(a,c){$("#"+a+":text, textarea#"+a).bind("keyup",function(){$.each(c.pages,function(a,c){b.jFormPages[c.jFormPageId].checkDependencies()});$.each(c.sections,function(a,c){b.jFormPages[c.jFormPageId].jFormSections[c.jFormSectionId].checkDependencies()});$.each(c.components,function(a,c){b.jFormPages[c.jFormPageId].jFormSections[c.jFormSectionId].jFormComponents[c.jFormComponentId].checkDependencies()})});
$("#"+a+"-wrapper").bind("jFormComponent:changed",function(){$.each(c.pages,function(a,c){b.jFormPages[c.jFormPageId].checkDependencies()});$.each(c.sections,function(a,c){b.jFormPages[c.jFormPageId].jFormSections[c.jFormSectionId].checkDependencies()});$.each(c.components,function(a,c){b.jFormPages[c.jFormPageId].jFormSections[c.jFormSectionId].jFormComponents[c.jFormComponentId].checkDependencies()})});var d=b.select(a);if(d!==null&&d.options.instanceOptions!==null)d.options.dependencies=c})},select:function(a){var b=
!1,c=null;$.each(this.jFormPages,function(d,e){$.each(e.jFormSections,function(d,e){$.each(e.jFormComponents,function(d,e){e.id==a&&(c=e,b=!0);return!b});return!b});return!b});return c},checkDependencies:function(){$.each(this.jFormPages,function(a,b){b.checkDependencies();$.each(b.jFormSections,function(a,b){b.checkDependencies();$.each(b.jFormComponents,function(a,b){b.checkDependencies()})})})},addSplashPage:function(){var a=this;if(!this.options.splashPage.options)this.options.splashPage.options=
{};this.options.splashPage.jFormPage=new JFormPage(this,this.form.find("div.jFormerSplashPage").attr("id"));this.options.splashPage.jFormPage.addSection(new JFormSection(this.options.splashPage.jFormPage,this.form.find("div.jFormerSplashPage").attr("id")+"-section"));this.options.splashPage.jFormPage.page.width(this.form.width());this.options.splashPage.jFormPage.active=!0;this.currentJFormPage=this.options.splashPage.jFormPage;this.jFormPageWrapper.height(this.options.splashPage.jFormPage.page.outerHeight());
this.options.splashPage.customButtonId?(this.options.splashPage.controlSplashLi=this.form.find("#"+this.options.splashPage.customButtonId),this.options.splashPage.controlSplashButton=this.form.find("#"+this.options.splashPage.customButtonId)):(this.options.splashPage.controlSplashLi=this.form.find("li.splashLi"),this.options.splashPage.controlSplashButton=this.form.find("button.splashButton"));this.setupControl();this.options.splashPage.controlSplashButton.bind("click",function(b){b.preventDefault();
a.beginFormFromSplashPage(!1)})},beginFormFromSplashPage:function(a,b){var c=this;this.options.pageNavigator!==!1&&this.jFormPageNavigator==null?(this.addPageNavigator(),this.jFormPageNavigator.show()):this.options.pageNavigator!==!1&&this.jFormPageNavigator.show();this.form.find(".jFormPage").css("width",this.form.find(".jFormWrapperContainer").width());c.options.splashPage.jFormPage.active=!1;if(!b)c.currentJFormPageIdArrayIndex=0,c.jFormPages[c.jFormPageIdArray[0]].scrollTo({onAfter:function(){c.options.splashPage.jFormPage.hide();
c.renumberPageNavigator()}})},addPageNavigator:function(){var a=this;this.jFormPageNavigator=this.form.find(".jFormPageNavigator");this.jFormPageNavigator.find(".jFormPageNavigatorLink:first").click(function(){if(a.currentJFormPageIdArrayIndex!=0)a.currentJFormPageIdArrayIndex=0,a.scrollToPage(a.jFormPageIdArray[0],{})});this.options.pageNavigator.position=="right"&&this.form.find(".jFormWrapperContainer").width(this.form.width()-this.jFormPageNavigator.width()-30)},updatePageNavigator:function(){for(var a=
this,b,c,d=1;d<=this.maxJFormPageIdArrayIndexReached+1;d++){b=d;var e=$("#navigatePage"+b);this.currentJFormPageIdArrayIndex!=b-1?e.removeClass("jFormPageNavigatorLinkActive"):e.addClass("jFormPageNavigatorLinkActive");e.hasClass("jFormPageNavigatorLinkLocked")&&(e.removeClass("jFormPageNavigatorLinkLocked").addClass("jFormPageNavigatorLinkUnlocked"),e.click(function(b){b=$(b.target);b.is("li")||(b=b.closest("li"));c=b.attr("id").match(/[0-9]+$/);c=parseInt(c)-1;a.getActivePage().validate(!0);a.currentJFormPageIdArrayIndex!=
c&&a.scrollToPage(a.jFormPageIdArray[c]);a.currentJFormPageIdArrayIndex=c}))}},renumberPageNavigator:function(){$(".jFormPageNavigatorLink:visible").each(function(a,b){$(b).find("span").length>0?$(b).find("span").html(a+1):$(b).html("Page "+(a+1))})},addJFormPage:function(a){this.jFormPageIdArray.push(a.id);this.jFormPages[a.id]=a},removeJFormPage:function(a){$("#"+a).remove();this.jFormPageIdArray=$.grep(this.jFormPageIdArray,function(b){return b!=a});delete this.jFormPages[a]},addEnterKeyListener:function(){var a=
this;this.form.bind("keydown",{context:this},function(a){(a.keyCode===13||a.charCode===13)&&!$(a.target).is("textarea")&&a.preventDefault()});this.form.bind("keyup",{context:this},function(b){a.getActivePage();if(b.keyCode===13||b.charCode===13){var c=$(b.target);c.is("textarea")||(c.is("button")?(b.preventDefault(),c.trigger("click").blur()):c.is(".jFormComponentEnterSubmits")?(b.preventDefault(),c.blur(),a.controlNextButton.trigger("click")):c.is("input:checkbox")?(b.preventDefault(),c.trigger("click")):
c.is("input:password")&&(b.preventDefault(),c.blur(),a.options.splashPage!==null&&a.currentJFormPage.id==a.options.splashPage.jFormPage.id?a.options.splashPage.controlSplashButton.trigger("click"):a.controlNextButton.trigger("click")))}})},addSubmitListener:function(){var a=this;this.form.bind("submit",{context:this},function(b){b.preventDefault();a.submitEvent(b)})},getData:function(){var a=this;this.formData={};$.each(this.jFormPages,function(b,c){a.formData[b]=c.getData()});return this.formData},
setData:function(a){var b=this;this.formData=a;$.each(a,function(a,d){b.jFormPages[a]!=void 0&&b.jFormPages[a].setData(d)});return this.formData},setupPageScroller:function(a){var b={adjustHeightDuration:0,jFormWrapperContainerWidth:this.form.find(".jFormWrapperContainer").width(),jFormPageWrapperWidth:this.jFormPageWrapper.width(),activePageOuterHeight:this.getActivePage().page.outerHeight()},a=$.extend(b,a),b=this.form.find(".jFormPage"),c=b.length;a.formWrapperContainerWidth!=0&&b.css("width",
a.formWrapperContainerWidth);b.show();a.formWrapperContainerWidth!=0&&(this.jFormPageScroller.css("width",a.jFormPageWrapperWidth*c),this.jFormPageWrapper.parent().css("width",a.jFormPageWrapperWidth));a.activePageOuterHeight!=0&&this.jFormPageWrapper.height(a.activePageOuterHeight);a.scrollToPage&&this.scrollToPage(this.currentFormPage.id,a)},setupControl:function(){var a=this;this.controlNextButton.unbind().click(function(b){b.preventDefault();b.context=a;a.submitEvent(b)}).removeAttr("disabled");
this.lastEnabledPage=!1;for(i=this.jFormPageIdArray.length-1;i>this.currentJFormPageIdArrayIndex;i--){if(!this.jFormPages[this.jFormPageIdArray[i]].disabledByDependency){this.lastEnabledPage=!1;break}this.lastEnabledPage=!0}this.controlPreviousButton.unbind().click(function(b){b.preventDefault();if(a.options.splashPage!==!1&&a.currentJFormPageIdArrayIndex===0)a.currentJFormPageIdArrayIndex=null,a.jFormPageNavigator&&a.jFormPageNavigator.hide(),a.options.splashPage.jFormPage.scrollTo();else{if(a.jFormPages[a.jFormPageIdArray[a.currentJFormPageIdArrayIndex-
1]].disabledByDependency)for(b=1;b<=a.currentJFormPageIdArrayIndex;b++){var c=a.currentJFormPageIdArrayIndex-b;if(c==0&&a.options.splashPage!==!1&&a.jFormPages[a.jFormPageIdArray[c]].disabledByDependency){a.jFormPageNavigator&&a.jFormPageNavigator.hide();a.options.splashPage.jFormPage.scrollTo();break}else if(!a.jFormPages[a.jFormPageIdArray[c]].disabledByDependency){a.currentJFormPageIdArrayIndex=c;break}}else a.currentJFormPageIdArrayIndex-=1;a.scrollToPage(a.jFormPageIdArray[a.currentJFormPageIdArrayIndex])}});
this.currentJFormPageIdArrayIndex===0&&this.currentJFormPageIdArrayIndex!=this.jFormPageIdArray.length-1&&this.lastEnabledPage===!1?(this.controlNextButton.html("Next"),this.controlNextLi.show(),this.controlPreviousLi.hide(),this.controlPreviousButton.attr("disabled","disabled")):a.currentJFormPageIdArrayIndex==this.jFormPageIdArray.length-1||this.lastEnabledPage===!0?(this.controlNextButton.html(this.options.submitButtonText),this.controlNextLi.show(),a.currentJFormPageIdArrayIndex===0?(this.controlPreviousLi.hide(),
this.controlPreviousButton.attr("disabled","")):a.currentJFormPageIdArrayIndex>0&&(this.controlPreviousButton.removeAttr("disabled"),this.controlPreviousLi.show())):(this.controlNextButton.html("Next"),this.controlNextLi.show(),this.controlPreviousButton.removeAttr("disabled"),this.controlPreviousLi.show());this.options.splashPage!==!1&&(this.options.splashPage.jFormPage.active?(this.options.splashPage.controlSplashLi.show(),this.controlNextLi.hide(),this.controlPreviousLi.hide(),this.controlPreviousButton.attr("disabled",
"disabled")):this.options.splashPage.controlSplashLi.hide(),this.currentJFormPageIdArrayIndex===0&&this.options.saveState==!1&&(this.controlPreviousButton.removeAttr("disabled"),this.controlPreviousLi.show()));this.control.find(".startOver").length==1&&(this.controlNextLi.hide(),this.controlPreviousLi.hide(),this.control.find(".startOver").one("click",function(b){b.preventDefault();a.currentJFormPageIdArrayIndex=0;a.scrollToPage(a.jFormPageIdArray[0],{onAfter:function(){$(b.target).parent().remove();
a.removeJFormPage(a.id+"jFormPageFailure")}})}))},scrollToPage:function(a,b){if(this.jFormPages[a]&&this.jFormPages[a].disabledByDependency)return!1;var c=this;this.controlNextButton.attr("disabled",!0);this.controlPreviousButton.attr("disabled",!0);var d=null;if((d=c.options.splashPage!==!1&&a==c.options.splashPage.formPage.id?c.options.splashPage.formPage:this.formPages[a])&&d.options.onScrollTo.onBefore!==null)this.jFormPages[a].options.onScrollTo.notificationHtml!==void 0&&(c.control.find(".jformerScrollToNotification").length!=
0?c.control.find(".jformerScrollToNotification").html(this.jFormPages[a].options.onScrollTo.notificationHtml):c.control.append('<li class="jformerScrollToNotification">'+this.jFormPages[a].options.onScrollTo.notificationHtml+"<li>")),this.jFormPages[a].options.onScrollTo.onBefore();this.getActivePage();$.each(this.jFormPages,function(a,b){b.show();b.active=!1});c.options.splashPage!==!1&&a==c.options.splashPage.jFormPage.id?(c.currentJFormPage=c.options.splashPage.jFormPage,c.currentJFormPage.show()):
this.currentJFormPage=this.jFormPages[a];this.currentJFormPage.active=!0;b&&b.adjustHeightDuration!==void 0?c.adjustHeight({adjustHeightDuration:b.adjustHeightDuration}):c.adjustHeight();this.jFormPageWrapper.dequeue();this.scrollToTop();var e=this.initializing;this.jFormPageWrapper.scrollTo(c.currentJFormPage.page,c.options.animationOptions.pageScroll.duration,{onAfter:function(){$(c.jFormPageWrapper).queue("fx").length<=1&&c.hideInactivePages(c.getActivePage());if(c.maxJFormPageIdArrayIndexReached<
c.currentJFormPageIdArrayIndex)c.maxJFormPageIdArrayIndexReached=c.currentJFormPageIdArrayIndex;c.updatePageNavigator();c.currentJFormPage.startTime=(new Date).getTime()/1E3;if(b&&b.onAfter)b.onAfter();if(c.currentFormPage.options.onScrollTo.onAfter)c.currentFormPage.options.onScrollTo.onAfter();c.setupControl();c.controlNextButton.removeAttr("disabled").blur();c.controlPreviousButton.removeAttr("disabled").blur();c.currentJFormPage.validationPassed===!1&&!e&&c.currentJFormPage.focusOnFirstFailedComponent();
c.jFormPages[a]&&c.jFormPages[a].options.onScrollTo.onAfter!==null&&(c.jFormPages[a].options.onScrollTo.onAfter(),c.jFormPages[a].options.onScrollTo.notificationHtml!==null&&c.control.find("li.jFormerScrollToNotification").remove())}});return this},scrollToTop:function(){this.initializing||$(window).scrollTop()>this.form.offset().top&&$(document).scrollTo(this.form,this.options.animationOptions.pageScroll.duration,{offset:{top:-10}})},getActivePage:function(){return this.currentJFormPage},hideInactivePages:function(){$.each(this.jFormPages,
function(a,b){b.hide()})},clearValidation:function(){$.each(this.jFormPages,function(a,b){b.clearValidation()})},submitEvent:function(a){a.stopPropagation();a.preventDefault();this.control.find(".jFormerFailureNotice").remove();this.form.find(".jFormerFailure").remove();typeof this.options.onSubmitStart!="function"?eval(this.options.onSubmitStart):this.options.onSubmitStart();var b=!1;this.options.clientSideValidation?b=this.currentJFormPageIdArrayIndex<this.jFormPageIdArray.length-1&&!this.lastEnabledPage?
this.getActivePage().validate():this.validateAll():(this.clearValidation(),b=!0);if(this.options.onSubmitFinish())if(b&&this.currentJFormPageIdArrayIndex==this.jFormPageIdArray.length-1||this.lastEnabledPage===!0)this.submitForm(a);else if(b&&this.currentJFormPageIdArrayIndex<this.jFormPageIdArray.length-1){if(this.jFormPages[this.jFormPageIdArray[this.currentJFormPageIdArrayIndex+1]].disabledByDependency)for(a=this.currentJFormPageIdArrayIndex+1;a<=this.jFormPageIdArray.length-1;a++){if(!this.jFormPages[this.jFormPageIdArray[this.currentJFormPageIdArrayIndex+
a]].disabledByDependency){this.currentJFormPageIdArrayIndex+=a;break}}else this.currentJFormPageIdArrayIndex+=1;this.scrollToPage(this.jFormPageIdArray[this.currentJFormPageIdArrayIndex])}},validateAll:function(){var a=this,b=!0,c=0;$.each(this.jFormPages,function(d,e){if(e.validate()===!1)return a.currentJFormPageIdArrayIndex=c,a.currentJFormPage.id!=e.id&&e.scrollTo(),b=!1;c++});return b},adjustHeight:function(a){var b=this.options.animationOptions.pageScroll.adjustHeightDuration;if(this.initializing)b=
0;else if(a&&a.adjustHeightDuration!==void 0)b=a.adjustHeightDuration;this.initializing||this.jFormPageWrapper.animate({height:this.getActivePage().page.outerHeight()},b)},submitForm:function(){var a=this.form.clone(!1);a.attr("id",a.attr("id")+"-clone");a.attr("style","display: none;");a.empty();a.appendTo($(this.form).parent());var b=$('<input type="hidden" name="jFormer" />').attr("value",encodeURI(jFormerUtility.jsonEncode(this.getData()))),c=$('<input type="hidden" name="jFormerId" value="'+
this.id+'" />');a.append(b);a.append(c);this.form.find("input:file").each(function(b,c){if($(c).val()!=""){var f=$(c).closest(".jFormSection").attr("id"),g=$(c).closest(".jFormPage").attr("id");if($(c).attr("id").match(/-section[0-9]+/)){var h=null,j=$(c).closest(".jFormSection"),k=j.attr("id").replace(/-section[0-9]+/,""),f=f.replace(/-section[0-9]+/,"");j.closest(".jFormPage").find("div[id*="+k+"]").each(function(a,b){if(j.attr("id")==$(b).attr("id"))return h=a+1,!1;return!0});c.attr("name",c.attr("name").replace(/-section[0-9]+/,
"-section"+h))}if($(c).attr("id").match(/-instance[0-9]+/)){var k=$(c).attr("id").replace(/-instance[0-9]+/,""),l=null;$(c).closest(".jFormSection").find("input[id*="+k+"]").each(function(a,b){if($(b).attr("id")==$(c).attr("id"))return l=a+1,!1;return!0});c.attr("name",$(c).attr("name").replace(/-instance[0-9]+/,"-instance"+l))}$(c).attr("name",$(c).attr("name")+":"+g+":"+f);$(c).appendTo(a)}});a.submit();a.remove();this.options.debugMode?this.form.find("iframe:hidden").show():this.controlNextButton.text(this.options.submitProcessingButtonText).attr("disabled",
"disabled");this.control.append('<li class="processingLi"></li>')},handleFormSubmissionResponse:function(a){var b=this;this.control.find(".processingLi").remove();if(a.status=="failure")a.response.validationFailed&&$.each(a.response.validationFailed,function(a,c){$.each(c,function(c,e){$.isArray(e)?$.each(e,function(e,g){var k;k=e!=0?"-section"+(e+1):"";$.each(g,function(g,j){b.jFormPages[a].jFormSections[c].instanceArray[e].jFormComponents[g+k].handleServerValidationResponse(j)})}):$.each(e,function(e,
g){b.jFormPages[a].jFormSections[c].jFormComponents[e].handleServerValidationResponse(g)})})}),a.response.failureHtml&&(this.control.find(".jFormerFailure").remove(),this.control.after('<div class="jFormerFailure">'+a.response.failureHtml+"</div>")),this.form.find("iframe").contents().find("body script").remove(),this.form.find("iframe").contents().find("body").html()!==null&&this.form.find(".jFormerFailure").append("<p>Output:</p>"+this.form.find("iframe").contents().find("body").html().trim()),
this.controlNextButton.text(this.options.submitButtonText),this.controlNextButton.removeAttr("disabled"),this.getActivePage().focusOnFirstFailedComponent();else if(a.status=="success"){if(a.response.successPageHtml){clearInterval(this.saveIntervalSetTimeoutId);var c=$('<div id="'+this.id+'formPageSuccess" class="formPage formPageSuccess">'+a.response.successPageHtml+"</div>");c.css("width",this.formPages[this.formPageIdArray[0]].page.width());this.jFormPageScroller.css("width",this.jFormPageScroller.width()+
this.formPages[this.formPageIdArray[0]].page.width());this.jFormPageScroller.append(c);c=new JFormPage(this,this.id+"jFormPageSuccess");this.addJFormPage(c);this.control.hide();this.jFormPageNavigator&&this.jFormPageNavigator.hide();c.scrollTo()}else a.response.failurePageHtml&&(c=$('<div id="'+this.id+'jFormPageFailure" class="jFormPage jFormPageFailure">'+a.response.failurePageHtml+"</div>"),c.width(this.jFormPages[this.jFormPageIdArray[0]].page.width()),this.jFormPageScroller.append(c),c=new JFormPage(this,
this.id+"jFormPageFailure"),this.addJFormPage(c),this.control.append($('<li class="startOver"><button class="startOverButton">Start Over</button></li>')),c.scrollTo());a.response.failureNoticeHtml&&(this.control.find(".jFormerFailureNotice").remove(),this.control.append('<li class="jFormerFailureNotice">'+a.response.failureNoticeHtml+"</li>"),this.controlNextButton.text(this.options.submitButtonText),this.controlNextButton.removeAttr("disabled"));a.response.failureHtml&&(this.control.find(".jFormerFailure").remove(),
this.control.after('<div class="jFormerFailure">'+a.response.failureHtml+"</div>"),this.controlNextButton.text(this.options.submitButtonText),this.controlNextButton.removeAttr("disabled"));a.response.successJs?eval(a.response.successJs):a.response.failureJs&&eval(a.response.failureJs);if(a.response.redirect)this.controlNextButton.html("Redirecting..."),document.location=a.response.redirect;a.response.reload&&(this.controlNextButton.html("Reloading..."),document.location.reload(!0))}},reset:function(){this.control.find(".jFormFailureNotice").remove();
this.control.find(".jFormFailure").remove();this.controlNextButton.text(this.options.submitButtonText);this.controlNextButton.removeAttr("disabled")},showAlert:function(a,b,c,d){function e(){f.hideEffect=="slide"?g.slideUp(f.hideDuration,function(){}):f.hideEffect=="fade"&&g.fadeOut(f.hideDuration,function(){})}if(this.options.alertsEnabled){var f=$.extend(this.options.animationOptions.alert,d),g=this.form.find(".jFormerAlertWrapper"),c=this.form.find(".jFormerAlert");c.addClass(b);c.text(a);f.appearEffect==
"slide"?g.slideDown(f.appearDuration,function(){setTimeout(e(),1E3)}):f.appearAffect=="fade"&&g.fadeIn(f.appearDuration,function(){setTimeout(e(),1E3)})}},showModal:function(a,b,c,d){var e=this.form.find(".jFormerModalWrapper"),f=$.extend(this.options.animationOptions.modal,d);e.length==0&&(d=$('<div class="jFormerModalTransparency"></div>'),e=$('<div style="display: none;" class="jFormerModalWrapper"><div class="jFormerModal"><div class="jFormerModalHeader">'+a+'</div><div class="jFormerModalContent">'+
b+'</div><div class="jFormerModalFooter"><button>Okay</button></div></div></div>'),this.form.find(".jFormerAlertWrapper").after(d),this.form.find(".jFormerAlertWrapper").after(e),c!=""&&e.addClass(c),e.find("button").click(function(){$(".jFormerModalWrapper").hide(f.hideDuration);$(".jFormerModalTransparency").hide(f.hideDuration);$(".jFormerModalWrapper").remove();$(".jFormerModalTransparency").remove();$("body").css("overflow","auto")}));var g=e.find(".jFormerModal");g.css({position:"absolute"});
var h=$(window);$("body").css("overflow","hidden");h.resize(function(){j=h.width()/2-g.width()/2;k=h.height()/2-g.height()/2+h.scrollTop();g.css({top:k,left:j});$(".jFormerModalTransparency").width(h.width()).height(h.height())});$(".jFormerModalTransparency").click(function(a){$(a.target).is(".jFormerModalTransparency")&&(e.hide(f.hideDuration),e.remove(),$(".jFormerModalTransparency").hide(f.hideDuration),$(".jFormerModalTransparency").remove(),$("body").css("overflow","auto"))});e.show(f.appearDuration);
var j=h.width()/2-g.width()/2,k=h.height()/2-g.height()/2+h.scrollTop();$(".jFormerModalTransparency").width(h.width()).height(h.height()*1.1).css("top",h.scrollTop());g.css({top:k,left:j})},addBlurTipListener:function(){var a=this;$(document).bind("blurTip",function(b,c,d){d=="hide"?(a.blurredTips=$.map(a.blurredTips,function(a){return $(a).attr("id")==c.attr("id")?null:a}),a.blurredTips[a.blurredTips.length-1]!=void 0&&a.blurredTips[a.blurredTips.length-1].removeClass("jFormerTipBlurred")):d=="show"&&
(a.blurredTips.length>0&&$.each(a.blurredTips,function(a,b){$(b).addClass("jFormerTipBlurred")}),a.blurredTips.push(c),c.removeClass("jFormerTipBlurred"))})}});
JFormPage=Class.extend({init:function(a,b,c){this.options=$.extend({dependencyOptions:null,onScrollTo:{onBefore:null,onAfter:null,notificationHtml:null}},c||{});if(this.options.onScrollTo.onBefore!==null){var d=$.trim(this.options.onScrollTo.onBefore);this.options.onScrollTo.onBefore=function(){eval(d)}}if(this.options.onScrollTo.onAfter!==null){var e=$.trim(this.options.onScrollTo.onAfter);this.options.onScrollTo.onAfter=function(){eval(e)}}this.jFormer=a;this.id=b;this.page=$("#"+b);this.jFormSections=
{};this.formData={};this.active=!1;this.validationPassed=null;this.disabledByDependency=!1},addSection:function(a){this.jFormSections[a.id]=a;return this},getData:function(){var a=this;this.disabledByDependency?this.formData=null:(this.formData={},$.each(this.jFormSections,function(b,c){a.formData[b]=c.getData()}));return this.formData},setData:function(a){var b=this;$.each(a,function(c,d){b.jFormSections[c]!=void 0?b.jFormSections[c].setData(d):a[c]=void 0});return this.formData=a},validate:function(a){if(this.disabledByDependency)return null;
var b=this,c=$.each;b.validationPassed=!0;c(this.jFormSections,function(a,e){c(e.instanceArray,function(a,d){c(d.jFormComponents,function(a,d){d.type!="JFormComponentLikert"&&c(d.instanceArray,function(a,c){c.validate();if(c.validationPassed==!1)b.validationPassed=!1})})})});b.validationPassed?$("#navigatePage"+(b.jFormer.currentJFormPageIdArrayIndex+1)).removeClass("jFormPageNavigatorLinkWarning"):a||this.id===this.jFormer.currentJFormPage.id&&this.focusOnFirstFailedComponent();return b.validationPassed},
clearValidation:function(){$.each(this.jFormSections,function(a,b){b.clearValidation()})},focusOnFirstFailedComponent:function(){var a=$.each,b=!0;a(this.jFormSections,function(c,d){a(d.instanceArray,function(c,d){a(d.jFormComponents,function(c,d){a(d.instanceArray,function(a,c){if(!c.validationPassed||c.errorMessageArray.length>0){var d=c.component.offset().top-30,e=$(window).scrollTop();e<d&&e+$(window).height()>c.component.position().top?c.component.find(":input:first").focus():$.scrollTo(d+"px",
500,{onAfter:function(){c.component.find(":input:first").focus()}});b=!1}return b});return b});return b});return b})},scrollTo:function(a){this.jFormer.scrollToPage(this.id,a);return this},show:function(){this.page.hasClass("jFormPageInactive")&&this.page.removeClass("jFormPageInactive")},hide:function(){this.active||this.page.addClass("jFormPageInactive")},disableByDependency:function(a){if(this.disabledByDependency!==a){var b=$.inArray(this.id,this.jFormer.jFormPageIdArray);a===!0?(this.page.hide(),
this.jFormer.options.pageNavigator!==!1&&(this.options.dependencyOptions.display=="hide"?($("#navigatePage"+(b+1)).hide(),this.jFormer.renumberPageNavigator()):$("#navigatePage"+(b+1)).addClass("jFormPageNavigatorLinkDependencyLocked").find("span").html("&nbsp;"))):(this.checkChildrenDependencies(),this.page.show(),this.jFormer.options.pageNavigator!==!1&&(this.options.dependencyOptions.display=="hide"?$("#navigatePage"+(b+1)).show():$("#navigatePage"+(b+1)).removeClass("jFormPageNavigatorLinkDependencyLocked"),
this.jFormer.renumberPageNavigator()));this.disabledByDependency=a;this.jFormer.setupControl()}},checkDependencies:function(){this.options.dependencyOptions!==null&&this.disableByDependency(!eval(this.options.dependencyOptions.jsFunction))},checkChildrenDependencies:function(){$.each(this.jFormSections,function(a,b){b.checkDependencies()})}});
JFormSection=Class.extend({init:function(a,b,c){this.options=$.extend({dependencyOptions:null,instanceOptions:null},c||{});this.parentJFormPage=a;this.id=b;this.section=$("#"+b);this.jFormComponents={};this.formData=null;this.disabledByDependency=!1;this.options.isInstance?this.clone=this.instanceArray=null:(this.instanceArray=[this],this.options.instanceOptions!=null?(this.clone=this.section.clone(),this.iterations=1):this.clone=null,this.instanceArray=[this],this.createInstanceButton())},createInstanceButton:function(){var a=
this;if(this.options.instanceOptions!=null){var b=this.id+"-addInstance",c='<button id="'+b+'" class="jFormSectionAddInstanceButton">'+this.options.instanceOptions.addButtonText+"</button>";this.options.dependencyOptions!==null&&this.options.dependencyOptions.display=="hide"&&c.hide();this.instanceArray[this.instanceArray.length-1].section.after(c);this.parentJFormPage.page.find("#"+b).bind("click",function(b){b.preventDefault();a.disabledByDependency||a.addSectionInstance()})}},addInitialSectionInstances:function(){if(this.options.instanceOptions!==
null&&this.options.instanceOptions.initialValues!==void 0&&this.options.instanceOptions.initialValues!==null){for(var a=this.options.instanceOptions.initialValues.length-1,b=0;b<a;b++)this.addSectionInstance(!0);this.instanceArray[this.instanceArray.length-1].section.after($("#"+this.id+"-addInstance"))}},addSectionInstance:function(a){var b=this;if(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0){this.iterations++;var c;a?c=$("#"+this.id+"-section"+
this.iterations):(c=this.clone.clone(),this.nameSectionInstance(c,a));var d='<button id="'+(this.id+"-removeInstance")+'" class="formSectionRemoveInstanceButton">'+this.options.instanceOptions.removeButtonText+"</button>",e={};this.options.instanceOptions.animationOptions!==void 0?$.extend(e,this.parentJFormPage.jFormer.options.animationOptions.instance,this.options.instanceOptions.animationOptions):e=this.parentJFormPage.jFormer.options.animationOptions.instance;$(c).append(d);c.find("#"+buttonId).bind("click",
function(a){var c=$(a.target);a.preventDefault();b.instanceArray=$.map(b.instanceArray,function(a){a.section.attr("id")==c.parent().attr("id")&&(a=null);return a});e.removeEffect=="none"||e.removeDuration===0?(c.parent().remove(),c.remove()):e.removeEffect=="slide"?(c.parent().slideUp(e.removeDuration,function(){c.parent().remove();c.remove()}),b.parentJFormPage.jFormer.adjustHeight(e)):c.parent().fadeOut(e.removeDuration,function(){c.parent().remove();c.remove();b.parentJFormPage.jFormer.adjustHeight(e)});
(b.instanceArray.length<b.options.instanceOptions.max||b.options.instanceOptions.max===0)&&b.parentJFormPage.page.find("#"+b.id+"-addInstance").show();b.relabelSectionInstances(b.instanceArray,e)});a||(c.hide(),this.parentJFormPage.page.find("#"+this.id+"-addInstance").before(c),e.appearEffect=="none"||e.appearDuration===0?c.show():e.appearEffect=="slide"?c.slideDown(e.appearDuration,function(){b.parentJFormPage.jFormer.adjustHeight(e)}):(c.fadeIn(e.appearDuration,function(){}),b.parentJFormPage.jFormer.adjustHeight(e)));
this.nameSectionInstance(c);this.instanceArray.push(this.createSectionInstanceObject(c,this.options));a||(this.relabelSectionInstances(this.instanceArray,e),this.instanceArray.length>=this.options.instanceOptions.max&&this.options.instanceOptions.max!==0&&this.parentJFormPage.page.find("#"+this.id+"-addInstance").hide())}return this},nameSectionInstance:function(a){function b(a,b){var g=$(a).attr(b),h="";g.match(/(\-[A-Za-z0-9]+)&?/)&&(h=g.match(/(\-[A-Za-z0-9]+)&?/)[1]);d=h;d==""?$(a).attr(b,$(a).attr(b)+
"-section"+c.iterations+d):$(a).attr(b,$(a).attr(b).replace(d,"-section"+c.iterations+d))}var c=this,d="";$(a).attr("id",$(a).attr("id")+"-section"+this.iterations);$(a).find("*").each(function(a,c){$(c).attr("id")&&b(c,"id");$(c).attr("for")&&b(c,"for");$(c).attr("name")&&b(c,"name")});return a},createSectionInstanceObject:function(a,b){var c=$.extend(!0,{},b);c.isInstance=!0;var d=this,e=new JFormSection(this.parentJFormPage,this.id+"-section"+this.iterations,c);$.each(this.jFormComponents,function(a,
b){var c=$.extend(!0,{},b.options);c.isInstance=!1;c=new window[b.type](e,b.id+"-section"+d.iterations,b.type,c);e.addComponent(c)});$.each(e.JFormComponents,function(a,b){if(b.options.dependencyOptions!=void 0){var c=d.parentJFormPage.form.select(b.options.dependencyOptions.dependentOn);d.section.find("#"+b.options.dependencyOptions.dependentOn+"-wrapper").length!=0&&e.JFormComponents[b.options.dependencyOptions.dependentOn+"-section"+d.iterations]&&(c=e.JFormComponents[b.options.dependencyOptions.dependentOn+
"-section"+d.iterations]);c.component.find(":text, textarea").bind("keyup",function(){b.checkDependencies()});c.component.bind("formComponent:changed",function(){b.checkDependencies()});b.checkDependencies()}});return e},relabelSectionInstances:function(a,b){$.each(a,function(a,b){if(a!==0){var e=a+1,f=b.section.find(".jFormSectionTitle").children(":first");f.length>0&&(f.text().match(/(\([0-9]+\))$/)?f.text(f.text().replace(/(\([0-9]+\))$/,"("+e+")")):f.text(f.text()+" ("+e+")"))}});this.parentJFormPage.jFormer.adjustHeight(b)},
addComponent:function(a){this.jFormComponents[a.id]=a;return this},clearValidation:function(){$.each(this.jFormComponents,function(a,b){b.clearValidation()})},getData:function(){var a=this;this.disabledByDependency?this.formData=null:this.instanceArray.length>1?(this.formData=[],$.each(this.instanceArray,function(b,c){var d={};$.each(c.jFormComponents,function(a,b){b.type!="JFormComponentLikertStatement"&&(a=a.replace(/-section[0-9]+/,""),d[a]=b.getData())});a.formData.push(d)})):(this.formData={},
$.each(this.jFormComponents,function(b,c){c.type!="JFormComponentLikertStatement"&&(a.formData[b]=c.getData())}));return this.formData},setData:function(a){var b=this;$.isArray(a)?$.each(a,function(a,d){a!==0&&b.instanceArray[a]==void 0&&b.addSectionInstance();$.each(d,function(d,f){a!==0&&(d=d+"-section"+(a+1));b.instanceArray[a].jFormComponents[d]!=void 0&&b.instanceArray[a].jFormComponents[d].setData(f)})}):$.each(a,function(a,d){b.jFormComponents[a]!=void 0&&b.jFormComponents[a].setData(d)})},
disableByDependency:function(a){var b=this,c=b.parentJFormPage.jFormer.initializing?{adjustHeightDuration:0,appearDuration:0,appearEffect:"none",hideDuration:0,hideEffect:"none"}:this.options.dependencyOptions.animationOptions!==void 0?$.extend(c,this.parentJFormPage.jFormer.options.animationOptions.dependency,this.options.dependencyOptions.animationOptions):this.parentJFormPage.jFormer.options.animationOptions.dependency,d=this.section;$.each(this.instanceArray,function(a,b){a!==0&&(d=d.add(b.section))});
if(this.options.instanceOptions!==null&&(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0)){var e=$(this.parentJFormSection.section.find("#"+this.id+"-addInstance"));b.parentJFormPage.jFormer.initializing&&!a&&e.is(":hidden")&&(e.show(),b.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0}));d=d.add(e)}if(this.disabledByDependency!==a)a?this.options.dependencyOptions.display=="hide"?c.hideEffect=="none"||c.hideDuration===0?(d.hide(),b.parentJFormPage.jFormer.adjustHeight(c)):
c.appearEffect==="fade"?d.fadeOut(c.hideDuration,function(){b.parentJFormPage.jFormer.adjustHeight(c)}):c.appearEffect==="slide"&&d.slideUp(c.hideDuration,function(){b.parentJFormPage.jFormer.adjustHeight(c)}):(d.addClass("jFormSectionDependencyDisabled").find(":not(.jFormComponentDisabled) > :input").attr("disabled","disabled"),this.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})):(this.options.dependencyOptions.display=="hide"?c.appearEffect=="none"||c.appearDuration===0?(d.show(),
b.parentJFormPage.form.adjustHeight(c),b.options.dependencyOptions.onAfterEnable&&eval(b.options.dependencyOptions.onAfterEnable)):c.hideEffect==="fade"?(d.fadeIn(c.appearDuration,function(){b.options.dependencyOptions.onAfterEnable&&eval(b.options.dependencyOptions.onAfterEnable)}),b.parentJFormPage.form.adjustHeight(c)):c.hideEffect==="slide"&&(d.slideDown(c.appearDuration,function(){b.options.dependencyOptions.onAfterEnable&&eval(b.options.dependencyOptions.onAfterEnable)}),b.parentJFormPage.form.adjustHeight(c)):
(d.removeClass("jFormSectionDependencyDisabled").find(":not(.jFormComponentDisabled) > :input").removeAttr("disabled"),this.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})),this.checkChildrenDependencies()),this.disabledByDependency=a},checkDependencies:function(){this.options.dependencyOptions!==null&&this.disableByDependency(!eval(this.options.dependencyOptions.jsFunction));$.each(this.instanceArray,function(a,b){b.checkChildrenDependencies()})},checkChildrenDependencies:function(){$.each(this.jFormComponents,
function(a,b){b.checkDependencies()})}});
JFormComponent=Class.extend({init:function(a,b,c,d){this.options=$.extend({validationOptions:[],showErrorTipOnce:!1,triggerFunction:null,componentChangedOptions:null,dependencyOptions:null,instanceOptions:null,tipTargetPosition:"rightMiddle",tipCornerPosition:"leftTop",isInstance:!1},d||{});this.parentJFormSection=a;this.id=b;this.component=$("#"+b+"-wrapper");this.formData=null;this.type=c;this.errorMessageArray=[];this.tip=null;this.tipDiv=this.component.find("#"+this.id+"-tip");this.tipTarget=
null;this.validationPassed=!0;this.requiredCompleted=this.isRequired=this.disabledByDependency=!1;this.validationFunctions={required:function(a){var b=["Required."];return a.value!=""?"success":b}};this.options.isInstance?this.clone=this.instanceArray=null:(this.options.instanceOptions!=null?(this.clone=this.component.clone(),this.iterations=1):this.clone=null,this.instanceArray=[this],this.createInstanceButton());this.initialize();this.reformValidations();this.addHighlightListeners();this.defineComponentChangedEventListener();
this.catchComponentChangedEventListener();$.trim(this.tipDiv.html())!==""&&this.addTip();this.addTipListeners()},addHighlightListeners:function(){var a=this;this.component.find(":input:not(button):not(hidden)").each(function(b,c){$(c).bind("focus",function(){a.highlight()});$(c).bind("blur",function(){a.removeHighlight();(a.type=="JFormComponentName"||a.type=="JFormComponentAddress"||a.type=="JFormComponentCreditCard")&&a.changed===!0&&a.validate()})});this.component.find("input:checkbox, input:radio").length>
0&&(this.component.mouseenter(function(){a.highlight()}),this.component.mouseleave(function(){a.removeHighlight()}));return this},reformValidations:function(){var a={},b=this;$.each(this.options.validationOptions,function(c,d){if(d=="required")b.isRequired=!0;if(c>=0)a[d]={component:b.component};else if(typeof d!="object")a[c]={component:b.component},a[c][c]=d;else if(typeof d=="object")d[0]!=void 0?(a[c]={},a[c][c]=d):a[c]=d,a[c].component=b.component});this.options.validationOptions=a},defineComponentChangedEventListener:function(){var a=
this;this.component.find("input:checkbox, input:radio").each(function(b,c){$(c).bind("click",function(){$(this).trigger("jFormComponent:changed",a)})});this.component.find(":input:not(button, :checkbox, :radio)").each(function(b,c){$(c).bind("change",function(){$(this).trigger("jFormComponent:changed",a)})})},catchComponentChangedEventListener:function(){var a=this;this.component.bind("jFormComponent:changed",function(){a.options.triggerFunction!==null&&eval(a.options.triggerFunction);if(a.type==
"JFormComponentName"||a.type=="JFormComponentAddress"||a.type=="JFormComponentLikert"||a.type=="JFormComponentCreditCard")a.changed=!0;a.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation&&a.validate()})},highlight:function(){this.component.addClass("jFormComponentHighlight").trigger("jFormComponent:highlighted",this.component);this.component.trigger("jFormComponent:showTip",this.component)},removeHighlight:function(){var a=this;this.component.removeClass("jFormComponentHighlight").trigger("jFormComponent:highlightRemoved",
this.component);setTimeout(function(){a.component.hasClass("jFormComponentHighlight")||a.component.trigger("jFormComponent:hideTip",a.component)},1)},getData:function(){var a=this;this.disabledByDependency||this.parentJFormSection.disabledByDependency?this.formData=null:this.instanceArray.length>1?(this.formData=[],$.each(this.instanceArray,function(b,c){var d=c.getValue();a.formData.push(d)})):this.formData=this.getValue();return this.formData},setData:function(a){var b=this;$.isArray(a)?$.each(a,
function(c,d){if(b.type=="JFormComponentMultipleChoice"&&($.isArray(d)||b.multipeChoiceType=="radio")||b.type!="JFormComponentMultipleChoice")c!==0&&b.instanceArray[c]==void 0&&b.addInstance(),b.instanceArray[c].setValue(d);else return b.setValue(a),!1}):this.setValue(a)},createInstanceButton:function(){var a=this;if(this.options.instanceOptions!=null){var b=$('<button id="'+this.id+'-addInstance" class="jFormComponentAddInstanceButton">'+this.options.instanceOptions.addButtonText+"</button>");this.options.dependencyOptions!==
null&&b.hide();this.component.after(b);this.parentJFormSection.section.find("#"+this.id+"-addInstance").bind("click",function(b){b.preventDefault();a.disabledByDependency||a.addInstance()})}},addInitialInstances:function(){this.options.instanceOptions!==null&&this.options.instanceOptions.initialValues!==void 0&&this.options.instanceOptions.initialValues!==null&&this.setData(this.options.instanceOptions.initialValues)},addInstance:function(){this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.instance!=
void 0&&this.options.componentChangedOptions.instance==!0&&this.component.trigger("jFormComponent:changed",this);var a=this;if(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0){var b=this.clone.clone(),c=this.parentJFormSection.section.find("#"+this.id+"-addInstance"),d={},d=this.options.instanceOptions.animationOptions!==void 0?$.extend(d,this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.instance,this.options.instanceOptions.animationOptions):
this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.instance;$(b).append('<button id="'+this.id+'-removeInstance" class="jFormComponentRemoveInstanceButton">'+this.options.instanceOptions.removeButtonText+"</button>");b.find("#"+this.id+"-removeInstance").bind("click",function(b){var e=$(b.target);b.preventDefault();a.instanceArray=$.map(a.instanceArray,function(a){a.component.attr("id")==e.parent().attr("id")&&(a.tip!=null&&a.tip.hide(),a=null);return a});d.removeEffect=="none"||
d.removeDuration===0?(e.parent().remove(),e.remove()):d.removeEffect=="slide"?e.parent().slideUp(d.removeDuration,function(){e.parent().remove();e.remove();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)}):e.parent().fadeOut(d.removeDuration,function(){e.parent().remove();e.remove();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)});(a.instanceArray.length<a.options.instanceOptions.max||a.options.instanceOptions.max===0)&&c.show();a.relabelInstances(a.instanceArray,d)});b.hide();
c.before(b);d.appearEffect=="none"||d.appearDuration===0?(!a.disabledByDependency||a.disabledByDependency&&a.options.dependencyOptions.display!="hide")&&b.show():a.disabledByDependency||(d.appearEffect=="slide"?b.slideDown(d.appearDuration,function(){a.parentJFormSection.parentJFormPage.jFormer.jFormPageWrapper.dequeue();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)}):b.fadeIn(d.appearDuration,function(){a.parentJFormSection.parentJFormPage.jFormer.jFormPageWrapper.dequeue();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)}));
this.nameInstance(b);b=this.createInstanceObject(b,this.options);this.instanceArray.push(b);this.relabelInstances(this.instanceArray,d);this.instanceArray.length==this.options.instanceOptions.max&&this.options.instanceOptions.max!==0&&c.hide();if(this.options.dependencies!=void 0){var e=a.parentJFormSection.parentJFormPage.jFormer;b.component.find(":text, textarea").bind("keyup",function(){$.each(a.options.dependencies.pages,function(a,b){e.jFormPages[b.jFormPageId].checkDependencies()});$.each(a.options.dependencies.sections,
function(a,b){e.jFormPages[b.jFormPageId].jFormSections[b.jFormSectionId].checkDependencies()});$.each(a.options.dependencies.components,function(a,b){e.jFormPages[b.jFormPageId].jFormSections[b.jFormSectionId].jFormComponents[b.jFormComponentId].checkDependencies()})});b.component.bind("jFormComponent:changed",function(){$.each(a.options.dependencies.pages,function(a,b){e.jFormPages[b.jFormPageId].checkDependencies()});$.each(a.options.dependencies.sections,function(a,b){e.jFormPages[b.jFormPageId].jFormSections[b.jFormSectionId].checkDependencies()});
$.each(a.options.dependencies.components,function(a,b){e.jFormPages[b.jFormPageId].jFormSections[b.jFormSectionId].jFormComponents[b.jFormComponentId].checkDependencies()})})}this.disabledByDependency&&this.disableByDependency(!0)}return this},nameInstance:function(a){function b(a,b){var g=$(a).attr(b),h="";g.match(/\-(div|label|tip|removeInstance)\b/)&&(h=g.match(/\-(div|label|tip|removeInstance)\b/)[0]);d=h;d==""?$(a).attr(b,$(a).attr(b)+"-instance"+c.iterations+d):$(a).attr(b,$(a).attr(b).replace(d,
"-instance"+c.iterations+d))}var a=$(a),c=this,d="";this.iterations++;a.attr("id",a.attr("id").replace("-wrapper","-instance"+this.iterations+"-wrapper"));a.find("*").each(function(a,c){$(c).attr("id")&&b(c,"id");$(c).attr("for")&&b(c,"for");$(c).attr("name")&&b(c,"name")});return a},createInstanceObject:function(a,b){var c=$.extend(!0,{},b);c.isInstance=!0;if(this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.children!=void 0&&this.options.componentChangedOptions.children==
!1)c.componentChangedOptions=null;return new window[this.type](this.parentJFormSection,this.id+"-instance"+this.iterations,this.type,c)},relabelInstances:function(a,b){$.each(a,function(a,b){if(a!==0){var e=a+1,f=b.component.find("#"+b.component.attr("id").replace("-wrapper","-label"));if(f.length>0){var g=f.find("span.jFormComponentLabelRequiredStar");g.length>0&&g.remove();f.html().match(/:$/)?f.html(f.html().replace(/(\([0-9]+\))?:/," ("+e+"):")):f.text().match(/(\([0-9]+\))$/)?f.text(f.text().replace(/(\([0-9]+\))$/,
"("+e+")")):f.text(f.text()+" ("+e+")")}else f=b.component.find("label"),g=f.find("span.jFormComponentLabelRequiredStar"),g.length>0&&g.remove(),f.text().match(/(\([0-9]+\))$/)?f.text(f.text().replace(/(\([0-9]+\))$/,"("+e+")")):f.text(f.text()+" ("+e+")");f.append(g)}});this.parentJFormSection.parentJFormPage.jFormer.adjustHeight(b)},addTip:function(){var a=this;if(typeof this.tip!=="function")this.tip=this.tipTarget.simpletip({persistent:!0,focus:!0,position:"topRight",content:a.tipDiv,baseClass:"jFormerTip",
hideEffect:"none",onBeforeShow:function(){if(a.tipDiv.find(".tipContent").text()=="")return!1},onShow:function(){var a=$(window).height(),c=this.getTooltip().offset().top+this.getTooltip().outerHeight()+12;$(window).scrollTop()+a<c&&$.scrollTo(c-a+"px",250,{axis:"y"})}}).simpletip()},addTipListeners:function(){var a=this;this.component.bind("jFormComponent:showTip",function(){a.tip&&typeof a.tip=="object"&&$.trim(a.tipDiv.html())!==""&&a.tip.show()});this.component.bind("jFormComponent:hideTip",function(){a.tip&&
typeof a.tip=="object"&&a.tip.hide();a.options.showErrorTipOnce&&a.clearValidation()});return this},clearValidation:function(){this.errorMessageArray=[];this.validationPassed=!0;this.component.removeClass("jFormComponentValidationFailed");this.component.addClass("jFormComponentValidationPassed");this.component.find(".tipErrorUl").remove();this.tip&&typeof this.tip=="object"&&(this.tip.update(this.tipDiv.html()),$.trim(this.tipDiv.find(".tipContent").html())==""&&this.tipDiv.hide())},initialize:function(){},
getValue:function(){},setValue:function(){},clearData:function(){this.component.find(":input").val("")},validate:function(a){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;if(this.options.validationOptions.length<1)return!0;if(a)var b=!0;var c=this;this.clearValidation();var d=this.getValue();if(d===null)return!0;$.each(this.options.validationOptions,function(e,f){f.value=d;var g=c.validationFunctions[e](f);if(g=="success"){if(e.match("required"))c.requiredCompleted=
!0;return!0}else{if(e.match("required")&&(c.requiredCompleted=!1,c.parentJFormSection.parentJFormPage.jFormer.options.pageNavigator!=!1)){var h=$.inArray(c.parentJFormSection.parentJFormPage.id,c.parentJFormSection.parentJFormPage.jFormer.jFormPageIdArray);$("#navigatePage"+(h+1)).addClass("jFormPageNavigatorLinkWarning")}a?b=!1:$.merge(c.errorMessageArray,g)}});if(a)return b;else{if(this.errorMessageArray.length>0)this.handleErrors(),this.validationPassed=!1;return this.validationPassed}},handleServerValidationResponse:function(a){$.each(this.instanceArray,
function(a,c){c.clearValidation()});if(a!=null&&a.length>0)this.instanceArray.length!=1?$.each(this.instanceArray,function(b,c){if(!jFormerUtility.empty(a[b])&&($.each(a[b],function(a,b){b!=""&&c.errorMessageArray.push(b)}),c.errorMessageArray.length>0))c.validationPassed=!1,c.handleErrors()}):(this.errorMessageArray=a,this.validationPassed=!1,this.handleErrors())},handleErrors:function(){this.component.removeClass("jFormComponentValidationPassed");this.component.addClass("jFormComponentValidationFailed");
this.tipDiv.length==0&&this.createTipDiv();if(this.parentJFormSection.parentJFormPage.jFormer.options.validationTips){var a=$('<ul id="'+this.id+'-tipErrorUl" class="tipErrorUl"></ul>');$.each(this.errorMessageArray,function(b,c){a.append("<li>"+c+"</li>")});this.tipDiv.find(".tipContent").append(a);this.tip.update(this.tipDiv.html());this.component.hasClass("jFormComponentHighlight")&&this.tip.show()}},createTipDiv:function(){this.tipDiv=$('<div id="'+this.id+'-tip" style="display: none;"></div>');
this.component.append(this.tipDiv);this.addTip()},disableByDependency:function(a){var b=this,c={};this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.dependency!=void 0&&this.options.componentChangedOptions.dependency==!0&&this.component.trigger("jFormComponent:changed",this);var d=this.component;$.each(this.instanceArray,function(a,b){a!==0&&(d=d.add(b.component))});if(this.options.instanceOptions!==null&&(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===
0)){var e=$(this.parentJFormSection.section.find("#"+this.id+"-addInstance"));b.parentJFormSection.parentJFormPage.jFormer.initializing&&(!a&&e.is(":hidden")?(e.show(),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})):this.options.dependencyOptions.display=="lock"&&(e.show(),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})));d=d.add(e)}c=b.parentJFormSection.parentJFormPage.jFormer.initializing?{adjustHeightDelay:0,appearDuration:0,
appearEffect:"none",hideDuration:0,hideEffect:"none"}:this.options.dependencyOptions.animationOptions!==void 0?$.extend(c,this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.dependency,this.options.dependencyOptions.animationOptions):this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.dependency;if(this.disabledByDependency!==a||this.parentFormSection.parentFormPage.form.initializing)a?(this.clearValidation(),this.options.dependencyOptions.display=="hide"?
c.hideEffect=="none"||c.hideDuration===0?(d.hide(c.hideDuration),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)):c.hideEffect==="fade"?d.fadeOut(c.hideDuration,function(){b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)}):c.hideEffect==="fade"&&d.slideUp(c.hideDuration,function(){b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)}):d.addClass("jFormComponentDependencyDisabled").find(":input").attr("disabled","disabled")):this.options.dependencyOptions.display==
"hide"?c.appearEffect=="none"||c.apearDuration===0?(d.show(),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)):c.appearEffect==="fade"?(d.fadeIn(c.appearDuration),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)):c.appearEffect==="slide"&&(d.slideDown(c.appearDuration),b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(c)):d.removeClass("jFormComponentDependencyDisabled").find(":input").removeAttr("disabled"),this.disabledByDependency=a},checkDependencies:function(){this.options.dependencyOptions!==
null&&this.disableByDependency(!eval(this.options.dependencyOptions.jsFunction))}});
JFormComponentAddress=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component;this.options.emptyValue&&this.addEmptyValues();this.validationFunctions={required:function(a){var b=[];a.value.addressLine1==""&&b.push(["Street Address is required."]);a.value.city==""&&b.push(["City is required."]);a.value.state==""&&b.push(["State is required."]);a.value.zip==""&&b.push(["Zip is required."]);a.value.country==""&&b.push(["Country is required."]);
return b.length<1?"success":b}};this.changed=!1},setValue:function(a){if(a===null||a==="")a={addressline1:"",city:"",state:"",zip:""};this.options.emptyValue?(a.addressLine1!=this.options.emptyValue.addressLine1&&this.component.find(":input[id*=addressLine1]").removeClass("defaultValue").val(a.addressLine1).blur(),a.addressLine2!=this.options.emptyValue.addressLine2&&this.component.find(":input[id*=addressLine2]").removeClass("defaultValue").val(a.addressLine2).blur(),a.city!=this.options.emptyValue.city&&
this.component.find(":input[id*=city]").removeClass("defaultValue").val(a.city).blur(),(a.state!=this.options.emptyValue.state||this.options.emptyValue.state==void 0)&&this.component.find(":input[id*=state]").removeClass("defaultValue").val(a.state).blur(),a.zip!=this.options.emptyValue.zip&&this.component.find(":input[id*=zip]").removeClass("defaultValue").val(a.zip).blur()):(this.component.find(":input[id*=addressLine1]").val(a.addressLine1),this.component.find(":input[id*=addressLine2]").val(a.addressLine2),
this.component.find(":input[id*=city]").val(a.city),this.component.find(":input[id*=state]").val(a.state),this.component.find(":input[id*=zip]").val(a.zip));this.component.find(":input[id*=country]").val(a.country);this.validate(!0)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a={},b=this;a.addressLine1=b.component.find(":input[id*=addressLine1]").val();a.addressLine2=b.component.find(":input[id*=addressLine2]").val();a.city=b.component.find(":input[id*=city]").val();
a.state=b.component.find(":input[id*=state]").val();a.zip=b.component.find(":input[id*=zip]").val();a.country=b.component.find(":input[id*=country]").val();this.component.find(":input").each(function(c,d){a[$(d).attr("id").replace(b.id+"-","")]=$(d).val()});if(this.options.emptyValue){if(a.addressLine1==this.options.emptyValue.addressLine1)a.addressLine1="";if(a.addressLine2==this.options.emptyValue.addressLine2)a.addressLine2="";if(a.city==this.options.emptyValue.city)a.city="";if(a.state==this.options.emptyValue.state)a.state=
"";if(a.zip==this.options.emptyValue.zip)a.zip=""}return a},validate:function(){if(this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){var a=this;this.changed||this._super();setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1)return!0;a.clearValidation();$.each(a.options.validationOptions,function(b,c){c.value=a.getValue();var d=a.validationFunctions[b](c);if(d!="success")$.merge(a.errorMessageArray,d),a.validationPassed=
!1});a.errorMessageArray.length>0&&a.handleErrors();a.changed=!1;return a.validationPassed}},1)}},addEmptyValues:function(){var a=this;$.each(this.options.emptyValue,function(b,c){var d=a.component.find("input[id*="+b+"]");d.addClass("defaultValue");d.focus(function(a){$.trim($(a.target).val())==c&&($(a.target).val(""),$(a.target).removeClass("defaultValue"))});d.blur(function(a){$.trim($(a.target).val())==""&&($(a.target).addClass("defaultValue"),$(a.target).val(c))});d.trigger("blur")})}});
JFormComponentCreditCard=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component;this.options.emptyValues&&this.addEmptyValues();this.validationFunctions={required:function(a){var b=[];a.value.cardType!=void 0&&a.value.cardType==""&&b.push(["Card type is required."]);a.value.cardNumber==""&&b.push(["Credit card number is required."]);a.value.cardNumber!=""&&a.value.cardNumber.match(/[^\d]/)&&b.push(["Card number may only contain numbers."]);
a.value.cardNumber!=""&&(a.value.cardNumber.length<13||a.value.cardNumber.length>16)&&b.push(["Card number must contain 13 to 16 digits."]);a.value.expirationMonth==""&&b.push(["Expiration month is required."]);a.value.expirationYear==""&&b.push(["Expiration year is required."]);a.value.securityCode!=void 0&&a.value.securityCode==""&&b.push(["Security code is required."]);a.value.securityCode!=void 0&&a.value.securityCode!=""&&a.value.securityCode.match(/[^\d]/)&&b.push(["Security code may only contain numbers."]);
a.value.securityCode!=void 0&&a.value.securityCode!=""&&a.value.securityCode.length<3&&b.push(["Security code must contain 3 or 4 digits."]);return b.length<1?"success":b}};this.changed=!1},setValue:function(a){this.options.emptyValues?(a.cardType!=void 0&&this.component.find(":input[id*=cardType]").removeClass("defaultValue").val(a.cardType).blur(),a.cardNumber!=this.options.emptyValues.cardNumber&&this.component.find(":input[id*=cardNumber]").removeClass("defaultValue").val(a.cardNumber).blur(),
this.component.find(":input[id*=expirationMonth]").removeClass("defaultValue").val(a.expirationMonth).blur(),this.component.find(":input[id*=expirationYear]").removeClass("defaultValue").val(a.expirationYear).blur(),a.securityCode!=void 0&&a.securityCode!=this.options.emptyValues.securityCode&&this.component.find(":input[id*=expirationMonth]").removeClass("defaultValue").val(a.expirationMonth).blur()):(a.cardType!=void 0&&this.component.find(":input[id*=cardType]").val(a.cardType),this.component.find(":input[id*=cardNumber]").val(a.cardNumber),
this.component.find(":input[id*=expirationMonth]").val(a.expirationMonth),this.component.find(":input[id*=expirationYear]").val(a.expirationYear),a.securityCode!=void 0&&this.component.find(":input[id*=securityCode]").val(a.securityCode));this.validate(!0)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a={};if(this.component.find(":input[id*=cardType]").length!=0)a.cardType=this.component.find(":input[id*=cardType]").val();a.cardNumber=
this.component.find(":input[id*=cardNumber]").val();a.expirationMonth=this.component.find(":input[id*=expirationMonth]").val();a.expirationYear=this.component.find(":input[id*=expirationYear]").val();if(this.component.find(":input[id*=securityCode]").length!=0)a.securityCode=this.component.find(":input[id*=securityCode]").val();if(this.options.emptyValues){if(a.cardNumber==this.options.emptyValues.cardNumber)a.cardNumber="";if(a.securityCode!=void 0&&a.securityCode==this.options.emptyValues.securityCode)a.securityCode=
""}return a},validate:function(){if(this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){var a=this;this.changed||this._super();setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1)return!0;a.clearValidation();$.each(a.options.validationOptions,function(b,c){c.value=a.getValue();var d=a.validationFunctions[b](c);if(d!="success")$.merge(a.errorMessageArray,d),a.validationPassed=!1});a.errorMessageArray.length>0&&
a.handleErrors();a.changed=!1;return a.validationPassed}},1)}},addEmptyValues:function(){var a=this;$.each(this.options.emptyValues,function(b,c){var d=a.component.find("input[id*="+b+"]");d.addClass("defaultValue");d.focus(function(a){$.trim($(a.target).val())==c&&($(a.target).val(""),$(a.target).removeClass("defaultValue"))});d.blur(function(a){$.trim($(a.target).val())==""&&($(a.target).addClass("defaultValue"),$(a.target).val(c))});d.trigger("blur")})}});
JFormComponentDate=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){var a=this;this.monthArray=["January","February","March","April","May","June","July","August","September","October","November","December"];this.addCalendar();this.tipTarget=this.component.find(".jFormComponentDateSelector");if(this.tipTarget==void 0)this.tipTarget=this.component;this.options.validationOptions.length==0&&this.reformValidations();this.validationFunctions={required:function(a){var c=
[];if(a.value.month==""||a.value.day==""||a.value.year==""||a.value==null)return c.push("Required."),c;var d=parseInt(a.value.month),e=parseInt(a.value.day),a=a.value.year,f=!1;a.match(/[\d]{4}/)||c.push("You must enter a valid year.");(d<1||d>12)&&c.push("You must enter a valid month.");d==4||d==6||d==9||d==11?e>30&&(f=!0):d==2&&(a=parseInt(a),e>(a%4==0&&(a%100!=0||a%400==0)?29:28)&&(f=!0));if(e>31||e<1)f=!0;f&&c.push("You must enter a valid day.");return c.length<1?"success":c},minDate:function(b){var c=
[],d=a.getDateFromString(b.minDate);a.getDateFromObject(b.value)<d&&c.push("Date must be on or after "+a.monthArray[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+".");return c.length<1?"success":c},maxDate:function(b){var c=[],d=a.getDateFromString(b.maxDate);a.getDateFromObject(b.value)>d&&c.push("Date must be on or before "+a.monthArray[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+".");return c.length<1?"success":c},teenager:function(a){var c=new Date(a.value.year,a.value.month,a.value.day),
d=new Date,c=new Date(d.getFullYear()-13,d.getMonth(),d.getDate())-c;return a.value==""||c>=0?"success":"You must be at least 13 years old to use this site."}}},highlight:function(){var a=this;this.component.addClass("jFormComponentHighlight").trigger("jFormComponent:highlighted",this.component);setTimeout(function(){a.component.trigger("jFormComponent:showTip",a.component)},1)},addCalendar:function(){var a=this.component.find("input:text");a.date_input();a.bind("keyup",function(b){b.keyCode==9||
b.keyCode==27||b.keyCode==13||b.keyCode==33||b.keyCode==34||b.keyCode==38||b.keyCode==40||b.keyCode==37||b.keyCode==39||a.val().length==10&&a.trigger("change")})},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a={month:"",day:"",year:""},b=$("#"+this.id).val();if(b!=""){b=b.split(b.match(/[^\d]/));if(b[0]!=void 0)a.month=b[0];if(b[1]!=void 0)a.day=b[1];if(b[2]!=void 0)a.year=b[2]}return a},getDateFromString:function(a){a=a.split("-");
return new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10))},getDateFromObject:function(a){return new Date(parseInt(a.year,10),parseInt(a.month,10)-1,parseInt(a.day,10))},setValue:function(a){function b(a){if(a==""||a=="undefined")return"";a=""+a;a.length==1&&(a="0"+a);return a}a==null||a.month=="undefined"||a.year=="undefined"||a.day=="undefined"?$("#"+this.id).val(""):($("#"+this.id).val(b(a.month)+"/"+b(a.day)+"/"+a.year),$("#"+this.id).val()=="//"&&$("#"+this.id).val(""),this.validate(!0))}});
JFormComponentDropDown=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component.find("select:last")},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;return $("#"+this.id).val()},setValue:function(a){$("#"+this.id).val(a).trigger("jFormComponent:changed");this.validate(!0)}});
JFormComponentFile=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){var a=this.component.find("button").parent();a.length<1&&(a=this.component.find("input:file"));this.tipTarget=a;this.options.customStyle&&this.setOnChange();this.validationFunctions={required:function(a){var c=["Required."];return a.value!=""?"success":c},extension:function(a){var c=["Must have the ."+a.extension+" extension."],d=RegExp("\\."+a.extension+"$","i");return a.value==""||a.value.match(d)?
"success":c},extensionType:function(a){var c,d=["Incorrect file type."];$.isArray(a.extensionType)?c=RegExp("\\.("+a.extensionType.join("|")+")$","i"):(c=RegExp({image:/\.(bmp|gif|jpe?g|png|psd|psp|thm|tif)/i,document:/\.(doc|docx|log|msg|pages|rtf|txt|wpd|wps)/i,audio:/\.(aac|aif|iff|m3u|mid|midi|mp3|mpa|ra|wav|wma)/i,video:/\.(3g2|3gp|asf|asx|avi|flv|mov|mp4|mpg|rm|swf|vob|wmv)/i,web:/\.(asp|css|htm|html|js|jsp|php|rss|xhtml)/i}[a.extensionType]),d=["Must be an "+a.extensionType+" file type."]);
return a.value==""||a.value.match(c)?"success":d},size:function(){return!0},imageDimensions:function(){return!0},minImageDimensions:function(){return!0}}},setOnChange:function(){var a=this;this.component.find("input:file").change(function(b){b=b.target.value.replace(/.+\\/,"");a.component.find("input:text").val(b)})},setValue:function(){return!1},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;return this.component.find("input:file").val()},
validate:function(){this._super()}});JFormComponentHidden=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;return $("#"+this.id).val()},validate:function(){this._super()}});
JFormComponentLikert=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){var a=this;this.changed=!1;this.tipTarget=this.component;this.statementComponentArray={};$.each(this.options.statementArray,function(b,c){if(!jFormerUtility.empty(a.options.validationOptions))c.validationOptions=a.options.validationOptions;var d=new JFormComponentLikertStatement(a.parentJFormSection,b,"JFormComponentLikertStatement",c);d.id=a.id+"-"+d.id;a.parentJFormSection.addComponent(d);
a.statementComponentArray[b]=d})},clearValidation:function(){$.each(this.statementComponentArray,function(a,b){b.clearValidation()})},setValue:function(){},catchComponentChangedEventListener:function(){return null},addHighlightListeners:function(){return null},defineComponentChangedEventListener:function(){return null},addTipListeners:function(){return null},getValue:function(){var a={};$.each(this.statementComponentArray,function(b,c){a[b]=c.getValue()});return a},handleErrors:function(){return!0},
handleServerValidationResponse:function(a){var b=this;a.length>0&&$.each(this.instanceArray,function(c,d){$.each(a,function(a,c){$.each(c,function(a,c){var e=b.parentJFormSection.jFormComponents[d.id+"-"+a];if(e!=void 0)e.errorMessageArray=[c],e.validationPassed=!1,e.handleErrors()})})})},validate:function(){return!0}});
JFormComponentLikertStatement=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.changed=!1;this.tipTarget=this.component=$("input[name="+this.id+"]:first").closest("tr");this.tipDiv=this.component.find("div.jFormComponentLikertStatementTip");this.validationFunctions={required:function(a){var b=["Required."];return a.value.length>0?"success":b}}},setValue:function(a){this.component.find("input").val([a]);this.validate(!0)},validate:function(){this._super()},
getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a=this.component.find("input:checked");return a=a.length>0?a.val():""}});
JFormComponentMultipleChoice=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component;this.addChoiceTips();this.validationFunctions={required:function(a){var b=["Required."];return a.value.length>0?"success":b},minOptions:function(a){var b=["You must select more than "+a.minOptions+" options"];return a.value.length==0||a.value.length>a.minOptions?"success":b},maxOptions:function(a){var b=["You may select up to "+a.maxOptions+" options. You have selected "+
a.value.length+"."];return a.value.length==0||a.value.length<=a.maxOptions?"success":b}}},addChoiceTips:function(){var a=this.component.find("div.jFormComponentMultipleChoiceTip");a.length>0&&a.each(function(a,c){var d=$(c).prev("label").find(".jFormComponentMultipleChoiceTipIcon");d.length==0&&(d=$(c).parent());d.simpletip({position:"topRight",content:$(c),baseClass:"jFormerTip jFormComponentMultipleChoiceTip",hideEffect:"none"})})},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;
var a;this.options.multipleChoiceType=="checkbox"?(a=[],this.component.find("input:checked").each(function(b,c){a.push($(c).val())})):a=this.component.find("input:checked").length>0?this.component.find("input:checked").val():"";return a},setValue:function(a){var b=this;this.options.multipleChoiceType=="checkbox"?$.each(a,function(a,d){b.component.find("input[value='"+d+"']").attr("checked","checked").trigger("jFormComponent:changed")}):(this.component.find("input[value='"+a+"']").attr("checked","checked").trigger("jFormComponent:changed"),
a==null&&this.component.find("input").attr("checked",!1).trigger("jFormComponent:changed"));this.validate(!0)}});
JFormComponentName=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component.find("input:last");this.options.emptyValue&&this.addEmptyValues();this.changed=!1;this.validationFunctions={required:function(a){var b=[];a.value.firstName==""&&b.push(["First name is required."]);a.value.lastName==""&&b.push(["Last name is required."]);return b.length<1?"success":b}}},setValue:function(a){this.options.emptyValue?(a.firstName!=this.options.emptyValue.firstName&&
this.component.find("input[id*=firstName]").removeClass("defaultValue").val(a.firstName).blur(),this.component.find("input[id*=middleInitial]").removeClass("defaultValue").val(a.middleInitial).blur(),a.lastName!=this.options.emptyValue.lastName&&this.component.find("input[id*=lastName]").removeClass("defaultValue").val(a.lastName).blur()):(this.component.find("input[id*=firstName]").val(a.firstName),this.component.find("input[id*=middleInitial]").val(a.middleInitial),this.component.find("input[id*=lastName]").val(a.lastName));
this.validate(!0)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a={};a.firstName=this.component.find("input[id*=firstName]").val();a.middleInitial=this.component.find("input[id*=middleInitial]").val();a.lastName=this.component.find("input[id*=lastName]").val();if(this.options.emptyValue){if(a.firstName==this.options.emptyValue.firstName)a.firstName="";if(this.component.find("input[id$=middleInitial]").hasClass("defaultValue"))a.middleInitial=
"";if(a.lastName==this.options.emptyValue.lastName)a.lastName=""}return a},validate:function(){if(this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){var a=this;this.changed||this._super();setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1)return!0;a.clearValidation();$.each(a.options.validationOptions,function(b,c){c.value=a.getValue();var d=a.validationFunctions[b](c);if(d!="success")$.merge(a.errorMessageArray,
d),a.validationPassed=!1});a.errorMessageArray.length>0&&a.handleErrors();a.changed=!1;return a.validationPassed}},1)}},addEmptyValues:function(){var a=this;$.each(this.options.emptyValue,function(b,c){var d=a.component.find("input[id*="+b+"]");d.addClass("defaultValue");d.focus(function(a){$.trim($(a.target).val())==c&&($(a.target).val(""),$(a.target).removeClass("defaultValue"))});d.blur(function(a){$.trim($(a.target).val())==""&&($(a.target).addClass("defaultValue"),$(a.target).val(c))});d.trigger("blur")})}});
JFormComponentSingleLineText=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d)},initialize:function(){this.tipTarget=this.component.find("input:last");this.enterSubmits=!1;this.options.mask&&this.addMask();this.options.emptyValue&&this.addEmptyValue();this.component.find("input:password").length==1&&this.options.showStrength&&this.addPasswordStrength();this.validationFunctions={alpha:function(a){var b=["Must only contain letters."];return a.value==""||a.value.match(/^[A-Za-z]+$/i)?
"success":b},alphaDecimal:function(a){var b=["Must only contain letters, numbers, or periods."];return a.value==""||a.value.match(/^[A-Za-z0-9\.]+$/i)?"success":b},alphaNumeric:function(a){var b=["Must only contain letters or numbers."];return a.value==""||a.value.match(/^[A-Za-z0-9]+$/i)?"success":b},blank:function(a){var b=["Must be blank."];return $.trim(a.value).length==0?"success":b},canadianPostal:function(a){var b=["Must be a valid Canadian postal code."];return a.value==""||a.value.match(/^[ABCEGHJKLMNPRSTVXY][0-9][A-Z] [0-9][A-Z][0-9]$/)?
"success":b},date:function(a){var b=["Must be a date in the mm/dd/yyyy format."];return a.value==""||a.value.match(/^(0?[1-9]|1[012])[\- \/.](0?[1-9]|[12][0-9]|3[01])[\- \/.](19|20)[0-9]{2}$/)?"success":b},dateTime:function(a){var b=["Must be a date in the mm/dd/yyyy hh:mm:ss tt format. ss and tt are optional."];return a.value==""||a.value.match(/^(0?[1-9]|1[012])[\- \/.](0?[1-9]|[12][0-9]|3[01])[\- \/.](19|20)?[0-9]{2} [0-2]?\d:[0-5]\d(:[0-5]\d)?( ?(a|p)m)?$/i)?"success":b},decimal:function(a){var b=
["Must be a number without any commas. Decimal is optional."];return a.value==""||a.value.match(/^-?((\d+(\.\d+)?)|(\.\d+))$/)?"success":b},decimalNegative:function(a){var b=["Must be a negative number without any commas. Decimal is optional."],c=this.decimal(a);return a.value==""||c=="success"&&parseFloat(a.value)<0?"success":b},decimalPositive:function(a){var b=["Must be a positive number without any commas. Decimal is optional."],c=this.decimal(a);return a.value==""||c=="success"&&parseFloat(a.value)>
0?"success":b},decimalZeroNegative:function(a){var b=["Must be zero or a negative number without any commas. Decimal is optional."],c=self.validations.decimal({value:a.value});return a.value==""||c=="success"&&parseFloat(a.value)<=0?"success":b},decimalZeroPositive:function(a){var b=["Must be zero or a positive number without any commas. Decimal is optional."],c=this.decimal(a);return a.value==""||c=="success"&&parseFloat(a.value)>=0?"success":b},email:function(a){var b=["Must be a valid e-mail address."];
return a.value==""||a.value.match(/^[A-Z0-9._%-\+]+@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4}$/i)?"success":b},integer:function(a){var b=["Must be a whole number."];return a.value==""||a.value.match(/^-?\d+$/)?"success":b},integerNegative:function(a){var b=["Must be a negative whole number."],c=this.integer(a);return a.value==""||c=="success"&&parseInt(a.value,10)<0?"success":b},integerPositive:function(a){var b=["Must be a positive whole number."],c=this.integer(a);return a.value==""||c=="success"&&parseInt(a.value,
10)>0?"success":b},integerZeroNegative:function(a){var b=["Must be zero or a negative whole number."],c=this.integer(a);return a.value==""||c=="success"&&parseInt(a.value,10)<=0?"success":b},integerZeroPositive:function(a){var b=["Must be zero or a positive whole number."],c=this.integer(a);return a.value==""||c=="success"&&parseInt(a.value,10)>=0?"success":b},isbn:function(a){var b=["Must be a valid ISBN and consist of either ten or thirteen characters."];a.value.match(/^(?=.{13}$)\d{1,5}([\- ])\d{1,7}\1\d{1,6}\1(\d|X)$/)&&
(b="sucess");a.value.match(/^\d{9}(\d|X)$/)&&(b="sucess");a.value.match(/^(?=.{17}$)\d{3}([\- ])\d{1,5}\1\d{1,7}\1\d{1,6}\1(\d|X)$/)&&(b="sucess");a.value.match(/^\d{3}[\- ]\d{9}(\d|X)$/)&&(b="sucess");a.value.match(/^\d{12}(\d|X)$/)&&(b="sucess");return b},length:function(a){var b=["Must be exactly "+a.length+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length==a.length?"success":b},matches:function(a){var b=["Does not match."],c=a.matches;if(a.sectionInstances){var d=
a.component.attr("id").match(/-section[\d]+/);d&&(c=a.matches+d)}return a.value==$("#"+c).val()?"success":b},maxLength:function(a){var b=["Must be less than "+a.maxLength+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length<=a.maxLength?"success":b},maxFloat:function(a){var b="Must be numeric and cannot have more than "+a.maxFloat+" decimal place(s).",c=RegExp("^-?((\\d+(\\.\\d{0,"+a.maxFloat+"})?)|(\\.\\d{0,"+a+"}))$");return a.value==""||a.value.match(c)?
"success":b},maxValue:function(a){var b=["Must be numeric with a maximum value of "+a.maxValue+"."];return a.value<=a.maxValue?"success":b},minLength:function(a){var b=["Must be at least "+a.minLength+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length>=a.minLength?"success":b},minValue:function(a){var b=["Must be numeric with a minimum value of "+a.minValue+"."];return a.value>=a.minValue?"success":b},money:function(a){var b=["Must be a valid dollar value."];
return a.value==""||a.value.match(/^\$?[1-9][0-9]{0,2}(,?[0-9]{3})*(\.[0-9]{2})?$/)?"success":b},moneyNegative:function(a){var b=["Must be a valid negative dollar value."];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5<0?"success":b},moneyPositive:function(a){var b=["Must be a valid positive dollar value."];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5>0?"success":b},moneyZeroNegative:function(a){var b=
["Must be zero or a valid negative dollar value."];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5<=0?"success":b},moneyZeroPositive:function(a){var b=["Must be zero or a valid positive dollar value."];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5>=0?"success":b},password:function(a){var b=["Must be between 4 and 32 characters."];return a.value==""||a.value.match(/^.{4,32}$/)?"success":b},phone:function(a){var b=
["Must be a 10 digit phone number."];return a.value==""||a.value.match(/^(1[\-. ]?)?\(?[0-9]{3}\)?[\-. ]?[0-9]{3}[\-. ]?[0-9]{4}$/)?"success":b},postalZip:function(a){var b=["Must be a valid United States zip code, Canadian postal code, or United Kingdom postal code."];return a.value==""||this.zip(a)=="success"||this.canadianPostal(a)=="success"||this.ukPostal()=="success"?"success":b},required:function(a){var b=["Required."];return a.value!=""?"success":b},serverSide:function(a){if(a.value=="")return"success";
var b=[];a.component.addClass("jFormComponentServerSideCheck");$.ajax({url:a.url,type:"post",data:{task:a.task,value:a.value},dataType:"json",cache:!1,async:!1,success:function(c){if(c.status!="success")b=c.response;a.component.removeClass("jFormComponentServerSideCheck")},error:function(c,d,e){d!="error"&&(e=d?d:"Unknown error");b=["There was an error during server side validation: "+e];a.component.removeClass("jFormComponentServerSideCheck")}});return b.length<1?"success":b},ssn:function(a){var b=
["Must be a valid United States social security number."];return a.value==""||a.value.match(/^\d{3}-?\d{2}-?\d{4}$/i)?"success":b},teenager:function(a){var b=new Date(a.value),c=new Date,b=new Date(c.getFullYear()-13,c.getMonth(),c.getDate())-b;return a.value==""||b>=0?"success":"Must be at least 13 years old."},time:function(a){var b=["Must be a time in the hh:mm:ss tt format. ss and tt are optional."];return a.value==""||a.value.match(/^[0-2]?\d:[0-5]\d(:[0-5]\d)?( ?(a|p)m)?$/i)?"success":b},ukPostal:function(a){var b=
["Must be a valid United Kingdom postal code."];return a.value==""||a.value.match(/^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}$/)?"success":b},url:function(a){var b=["Must be a valid Internet address."];return a.value==""||a.value.match(/^((ht|f)tp(s)?:\/\/|www\.)?([\-A-Z0-9.]+)(\.[a-zA-Z]{2,4})(\/[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)?"success":b},username:function(a){var b=["Must use 4 to 32 characters and start with a letter."];return a.value==""||a.value.match(/^[A-Za-z](?=[A-Za-z0-9_.]{3,31}$)[a-zA-Z0-9_]*\.?[a-zA-Z0-9_]*$/)?
"success":b},zip:function(a){var b=["Must be a valid United States zip code."];return a.value==""||a.value.match(/^[0-9]{5}(?:-[0-9]{4})?$/)?"success":b}}},addMask:function(){this.component.find("input").mask("?"+this.options.mask,{placeholder:" "})},addPasswordStrength:function(){var a=this,b=this.component,c="<p id='"+this.id+"-strength' > Strength: <b> "+this.getPasswordStrength().strength+" </b> </p>";b.find("div.jFormComponentTip").append(c);b.find("input:password").bind("keyup",function(){b.find("#"+
a.id+"-strength b").text(a.getPasswordStrength().strength);a.tip.update(b.find("div.jFormComponentTip").html())})},getPasswordStrength:function(){var a=this.getValue(),b=0,c="None";a.length>=6&&(b+=1);a.length>=10&&(b+=1);a.match(/[a-z]/)&&(b+=1);a.match(/[A-Z]/)&&(b+=1);a.match(/\d+/)&&(b+=1);a.match(/(\d.*\d)/)&&(b+=1);a.match(/[!,@#$%\^&*?_~]/)&&(b+=1);a.match(/([!,@#$%\^&*?_~].*[!,@#$%\^&*?_~])/)&&(b+=1);a.match(/[a-z]/)&&a.match(/[A-Z]/)&&(b+=1);a.match(/\d/)&&a.match(/\D/)&&(b+=1);a.match(/[a-z]/)&&
a.match(/[A-Z]/)&&a.match(/\d/)&&a.match(/[!,@#$%\^&*?_~]/)&&(b+=1);b===0?c="None":b<=1?c="Very Weak":b<=3?c="Weak":b<=5?c="Good":b<=7?c="Strong":b>7&&(c="Very Strong");return{score:b,strength:c}},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;var a=$("#"+this.id).val();return this.options.emptyValue?a==this.options.emptyValue?"":a:a},setValue:function(a){$("#"+this.id).val(a).removeClass("defaultValue");this.validate(!0)},addEmptyValue:function(){var a=
this.options.emptyValue,b=this.component.find("input");b.addClass("defaultValue");b.val(a);var c="";b.focus(function(b){c=$(b.target);$.trim(c.val())==a&&(c.val(""),c.removeClass("defaultValue"))});b.blur(function(b){c=$(b.target);$.trim(c.val())==""&&(c.addClass("defaultValue"),c.val(a))})}});
JFormComponentTextArea=JFormComponent.extend({init:function(a,b,c,d){this._super(a,b,c,d);this.options.allowTabbing&&this.allowTabbing();this.options.emptyValue&&this.addEmptyValue();this.options.autoGrow&&this.addAutoGrow()},initialize:function(){this.tipTarget=this.component.find("textarea");this.options.emptyValue&&this.addEmptyValue()},allowTabbing:function(){this.component.find("textarea").bind("keydown",function(a){if(a!=null&&a.keyCode==9){if(this.setSelectionRange){var b=this.selectionStart,
c=this.selectionEnd;this.value=this.value.substring(0,b)+"\t"+this.value.substr(c);this.setSelectionRange(b+1,b+1);this.focus()}else if(this.createTextRange)document.selection.createRange().text="\t",a.returnValue=!1;a.preventDefault&&a.preventDefault();return!1}})},addEmptyValue:function(){var a=this.options.emptyValue,b=this.component.find("textarea");b.addClass("defaultValue");b.val(a);var c="";b.focus(function(b){c=$(b.target);$.trim(c.val())==a&&(c.val(""),c.removeClass("defaultValue"))});b.blur(function(b){c=
$(b.target);$.trim(c.val())==""&&(c.addClass("defaultValue"),c.val(a))})},addAutoGrow:function(){var a=this,b=this.component.find("textarea"),c=b.height();b.css("lineHeight");var d=$("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,width:b.width()-parseInt(b.css("paddingLeft"))-parseInt(b.css("paddingRight")),fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),lineHeight:b.css("lineHeight"),resize:"none"}).appendTo(document.body),e=function(){var e=b.val().replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b=0,c="";b<a.length-1;b++)c+="&nbsp;";return c+" "});d.html(e);b.css("height",Math.max(d.height()+20,c));a.parentJFormSection.parentJFormPage.jFormer.currentJFormPage&&a.parentJFormSection.parentJFormPage.jFormer.adjustHeight({delay:0})};$(b).change(e).keyup(e).keydown(e);e.apply(b);return this},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency)return null;
var a=$("#"+this.id).val();return this.options.emptyValue?a==this.options.emptyValue?"":a:a},setValue:function(a){$("#"+this.id).val(a);this.validate(!0)}});